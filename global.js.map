{"version":3,"sources":["webpack://lowclass/webpack/bootstrap","webpack://lowclass/./src/utils.js","webpack://lowclass/./src/native.js","webpack://lowclass/./src/Class.js","webpack://lowclass/./src/Mixin.js","webpack://lowclass/./src/instanceOf.js","webpack://lowclass/./src/index.js"],"names":["WeakTwoWayMap","constructor","m","WeakMap","set","a","b","get","item","has","getFunctionBody","fn","code","toString","split","shift","pop","join","descriptorDefaults","enumerable","configurable","setDescriptor","obj","key","newDescriptor","inherited","currentDescriptor","getInheritedDescriptor","Object","getOwnPropertyDescriptor","overrideDescriptor","defineProperty","setDescriptors","newDescriptors","currentDescriptors","getOwnPropertyDescriptors","defineProperties","oldDescriptor","TypeError","value","writable","propertyIsAccessor","result","descriptor","arguments","length","currentProto","owner","__proto__","getInheritedPropertyNames","keys","concat","getOwnPropertyNames","Array","from","Set","newless","supportsSpread","isSyntaxSupported","supportsClass","supportsNewTarget","TRUE_CONSTRUCTOR","Symbol","getPrototype","getPrototypeOf","object","prototype","setPrototype","setPrototypeOf","newPrototype","construct","Reflect","Function","instantiator","args","target","instance","apply","SKIP_PROPERTIES","copyProperties","source","destination","properties","getOwnPropertySymbols","i","indexOf","property","name","usesClassSyntax","substr","requiresNew","newlessConstructor","returnValue","error","test","message","create","Node","console","newTarget","hasNewTarget","eval","example","useStrict","staticBlacklist","publicProtoToProtectedProto","publicProtoToPrivateProto","publicToProtected","privateInstanceToClassScope","brandToPublicPrototypes","brandToProtectedPrototypes","brandToPrivatePrototypes","brandToPublicsPrivates","defaultOptions","mode","nativeNaming","prototypeWritable","defaultClassDescriptor","setClassDescriptors","InvalidSuperAccessError","Error","InvalidAccessError","Class","createClassHelper","options","usingStaticSubclassMethod","definer","classBrand","Ctor","createClass","call","extends","ParentClass","def","brand","className","definition","scopedPublicsToPrivates","undefined","scope","publicToPrivate","cachedPublicAccesses","cachedProtectedAccesses","cachedPrivateAccesses","supers","Super","superHelper","bind","Public","getPublicMembers","Protected","getProtectedMembers","Private","getPrivateMembers","customClass","staticMembers","static","public","protected","private","parentPublicPrototype","publicPrototype","parentProtectedPrototype","getParentProtectedPrototype","protectedPrototype","parentPrivatePrototype","getParentPrivatePrototype","privatePrototype","add","copyDescriptors","userConstructor","hasOwnProperty","NewClass","ret","proto","setDefaultStaticDescriptors","setDefaultPrototypeDescriptors","parentProtectedProto","currentPublicProto","parentPrivateProto","isPrivateInstance","getSubclassScope","isProtectedInstance","isPublicInstance","createProtectedInstance","publicInstance","privateInstance","findLeafmostProtectedPrototype","protectedInstance","createPrivateInstance","brandedCheck","hasPrototype","mod","props","prop","getSuperHelperObject","parentPrototype","_super","getter","setter","descriptors","includes","Mixin","factory","Default","Cached","HasInstance","Dedupe","WithDefault","ApplyDefault","classFactory","named","Base","classCache","instanceofSymbol","hasInstance","DefaultClass","mixin","map","hasMixin","func","e","instanceOf","Constructor","version"],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;ACjFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;AAEA,MAAMA,aAAN,CAAoB;AAChBC,gBAAc;AAAE,SAAKC,CAAL,GAAS,IAAIC,OAAJ,EAAT;AAAsB;;AACtCC,MAAKC,CAAL,EAAQC,CAAR,EAAY;AAAE,SAAKJ,CAAL,CAAOE,GAAP,CAAYC,CAAZ,EAAeC,CAAf;AAAoB,SAAKJ,CAAL,CAAOE,GAAP,CAAYE,CAAZ,EAAeD,CAAf;AAAoB;;AACtDE,MAAKC,IAAL,EAAY;AAAE,WAAO,KAAKN,CAAL,CAAOK,GAAP,CAAYC,IAAZ,CAAP;AAA2B;;AACzCC,MAAKD,IAAL,EAAY;AAAE,WAAO,KAAKN,CAAL,CAAOO,GAAP,CAAYD,IAAZ,CAAP;AAA2B;;AAJzB;;CAiBpB;;AACA,SAASE,eAAT,CAA0BC,EAA1B,EAA+B;AAC3B,QAAMC,OAAOD,GAAGE,QAAH,GAAcC,KAAd,CAAoB,IAApB,CAAb;AACAF,OAAKG,KAAL,GAF2B,CAEd;;AACbH,OAAKI,GAAL,GAH2B,CAGhB;;AACX,SAAOJ,KAAKK,IAAL,CAAU,IAAV,CAAP;AACH;;AAED,MAAMC,qBAAqB;AACvBC,cAAY,IADW;AAEvBC,gBAAc,IAFS,CAK3B;;AAL2B,CAA3B;;AAMA,SAASC,aAAT,CAAwBC,GAAxB,EAA6BC,GAA7B,EAAkCC,aAAlC,EAAiDC,YAAY,KAA7D,EAAqE;AACjE,MAAIC,oBACAD,YACAE,uBAAwBL,GAAxB,EAA6BC,GAA7B,CADA,GAEAK,OAAOC,wBAAP,CAAiCP,GAAjC,EAAsCC,GAAtC,CAHJ;AAMAC,kBAAgBM,mBAAoBJ,iBAApB,EAAuCF,aAAvC,CAAhB;AACAI,SAAOG,cAAP,CAAuBT,GAAvB,EAA4BC,GAA5B,EAAiCC,aAAjC;AACH;;AAED,SAASQ,cAAT,CAAyBV,GAAzB,EAA8BW,cAA9B,EAA+C;AAC3C,MAAIT,aAAJ;AACA,MAAIE,iBAAJ;AACA,QAAMQ,qBAAqBN,OAAOO,yBAAP,CAAkCb,GAAlC,CAA3B;;AAEA,OAAM,MAAMC,GAAZ,IAAmBU,cAAnB,EAAoC;AAChCT,oBAAgBS,eAAgBV,GAAhB,CAAhB;AACAG,wBAAoBQ,mBAAoBX,GAApB,CAApB;AACAU,mBAAgBV,GAAhB,IAAwBO,mBAAoBJ,iBAApB,EAAuCF,aAAvC,CAAxB;AACH;;AAEDI,SAAOQ,gBAAP,CAAyBd,GAAzB,EAA8BW,cAA9B;AACH;;AAED,SAASH,kBAAT,CAA6BO,aAA7B,EAA4Cb,aAA5C,EAA4D;AAExD,MACI,CAAE,SAASA,aAAT,IAA0B,SAASA,aAArC,MACE,WAAWA,aAAX,IAA4B,cAAcA,aAD5C,CADJ,EAGE;AACE,UAAM,IAAIc,SAAJ,CAAc,iEAAd,CAAN;AACH;;AAED,MAAKD,aAAL,EAAqB;AAEjB,QAAK,SAASb,aAAT,IAA0B,SAASA,aAAxC,EAAwD;AACpD,aAAOa,cAAcE,KAArB;AACA,aAAOF,cAAcG,QAArB;AACH,KAHD,MAIK,IAAK,WAAWhB,aAAX,IAA4B,cAAcA,aAA/C,EAA+D;AAChE,aAAOa,cAAc9B,GAArB;AACA,aAAO8B,cAAcjC,GAArB;AACH;AAEJ;;AAED,2BAAYc,kBAAZ,EAAmCmB,aAAnC,EAAqDb,aAArD;AACH;;AAED,SAASiB,kBAAT,CAA6BnB,GAA7B,EAAkCC,GAAlC,EAAuCE,YAAY,IAAnD,EAA0D;AACtD,MAAIiB,SAAS,KAAb;AACA,MAAIC,UAAJ;;AAEA,MAAKC,UAAUC,MAAV,KAAqB,CAA1B,EAA8B;AAC1BF,iBAAarB,GAAb;AACH,GAFD,MAGK;AACDqB,iBAAalB,YACTE,uBAAwBL,GAAxB,EAA6BC,GAA7B,CADS,GAETK,OAAOC,wBAAP,CAAiCP,GAAjC,EAAsCC,GAAtC,CAFJ;AAGH;;AAED,MAAKoB,eAAgBA,WAAWpC,GAAX,IAAkBoC,WAAWvC,GAA7C,CAAL,EAA0DsC,SAAS,IAAT;AAE1D,SAAOA,MAAP;AACH;;AAED,SAASf,sBAAT,CAAiCL,GAAjC,EAAsCC,GAAtC,EAA4C;AACxC,MAAIuB,eAAexB,GAAnB;AACA,MAAIqB,UAAJ;;AAEA,SAAQG,YAAR,EAAuB;AACnBH,iBAAaf,OAAOC,wBAAP,CAAiCiB,YAAjC,EAA+CvB,GAA/C,CAAb;;AAEA,QAAKoB,UAAL,EAAkB;AACdA,iBAAWI,KAAX,GAAmBD,YAAnB;AACA,aAAOH,UAAP;AACH;;AAEDG,mBAAeA,aAAaE,SAA5B;AACH;AACJ;;AAED,SAASC,yBAAT,CAAoC3B,GAApC,EAA0C;AACtC,MAAIwB,eAAexB,GAAnB;AACA,MAAI4B,OAAO,EAAX;;AAEA,SAAQJ,YAAR,EAAuB;AACnBI,WAAOA,KAAKC,MAAL,CAAavB,OAAOwB,mBAAP,CAA4BN,YAA5B,CAAb,CAAP;AACAA,mBAAeA,aAAaE,SAA5B;AACH,GAPqC,CAStC;;;AACAE,SAAOG,MAAMC,IAAN,CAAY,IAAIC,GAAJ,CAASL,IAAT,CAAZ,CAAP;AAEA,SAAOA,IAAP;AACH,C;;;;;;;ACnID;AAAA;AAAA;AACA;;AAEA;;;;;;;;;;;;;;;AAgBA;AAEA;AAIeM,iFAAf;AAEA,IAAIC,iBAAiBC,kBAAkB,iBAAlB,CAArB;AACA,IAAIC,gBAAgBD,kBAAkB,eAAlB,CAApB;AACA,IAAIE,oBAAoBF,kBAAkB,YAAlB,CAAxB,C,CAEA;;AACA,IAAIG,mBAAmBC,SACnBA,OAAO,iBAAP,CADmB,GAEnB,4BAFJ,C,CAIA;;AACA,IAAIC,eAAenC,OAAOoC,cAAP,IAAyB,SAASD,YAAT,CAAsBE,MAAtB,EAA8B;AACxE,SAAOA,OAAOjB,SAAP,IACJiB,OAAOhE,WAAP,IAAsBgE,OAAOhE,WAAP,CAAmBiE,SADrC,IAELtC,OAAOsC,SAFT;AAGD,CAJD;;AAMA,IAAIC,eAAevC,OAAOwC,cAAP,IACjB,SAASA,cAAT,CAAwBH,MAAxB,EAAgCI,YAAhC,EAA8C;AAC5CJ,SAAOjB,SAAP,GAAmBqB,YAAnB;AACD,CAHH,C,CAKA;;;AACA,IAAIC,YAAYC,WAAWA,QAAQD,SAAnB,IAAiC,YAAW;AAC1D,MAAIX,aAAJ,EAAmB;AAEjB,WAAOa,SAAS,2BAAT,EAAuC;;;;;;;;;;;;;;;;;;;QAmBzCf,iBAAmB;;;;OAAnB,GAIA;;;;;;;;;;;;;;;;;;;OAmBD;;;;;;KA1CG,CAAP,CAFiB,CAoDjB;AACA;AAEA;AACA;AAEA;AAEA;AAEA;AAEA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACD,GA3ED,MA4EK;AACH,QAAIgB,eAAe,YAAW,CAAE,CAAhC;;AACA,WAAO,SAASH,SAAT,CAAmBrE,WAAnB,EAAgCyE,IAAhC,EAAsCC,MAAtC,EAA8C;AACnD,UAAI/B,UAAUC,MAAV,KAAqB,CAArB,IAA0B,OAAO8B,MAAP,KAAkB,UAAhD,EACE,MAAM,IAAIrC,SAAJ,CAAcqC,SAAS,uBAAvB,CAAN;AACFF,mBAAaP,SAAb,GAAyB,CAACS,UAAU1E,WAAX,EAAwBiE,SAAjD;AACA,UAAIU,WAAW,IAAIH,YAAJ,EAAf;AACA,UAAIlC,QAAQtC,YAAY4E,KAAZ,CAAkBD,QAAlB,EAA4BF,IAA5B,CAAZ;;AACA,UAAI,OAAOnC,KAAP,KAAiB,QAAjB,IAA6BA,KAAjC,EAAwC;AACtC;AACAA,cAAMS,SAAN,GAAkB,CAAC2B,UAAU1E,WAAX,EAAwBiE,SAA1C;AACA,eAAO3B,KAAP;AACD;;AACD,aAAOqC,QAAP;AACD,KAZD;AAaD;AACF,CA7F+C,EAAhD,C,CA+FA;;;AACA,IAAIE,kBAAkB,CAAC,WAAD,EAAc,QAAd,EAAwB,QAAxB,EAAkC,MAAlC,EAA0C,WAA1C,CAAtB;;AACA,SAASC,cAAT,CAAwBC,MAAxB,EAAgCC,WAAhC,EAA6C;AAC3C,MAAIrD,OAAOwB,mBAAP,IAA8BxB,OAAOG,cAAzC,EAAyD;AACvD,QAAImD,aAAatD,OAAOwB,mBAAP,CAA2B4B,MAA3B,CAAjB;;AACA,QAAIpD,OAAOuD,qBAAX,EAAkC;AAChCD,mBAAaA,WAAW/B,MAAX,CAAkBvB,OAAOuD,qBAAP,CAA6BH,MAA7B,CAAlB,CAAb;AACD;;AACD,SAAK,IAAII,IAAIF,WAAWrC,MAAX,GAAoB,CAAjC,EAAoCuC,KAAK,CAAzC,EAA4CA,GAA5C,EAAiD;AAC/C,UAAIN,gBAAgBO,OAAhB,CAAwBH,WAAWE,CAAX,CAAxB,MAA2C,CAAC,CAAhD,EAAmD;AACjDxD,eAAOG,cAAP,CACEkD,WADF,EAEEC,WAAWE,CAAX,CAFF,EAGExD,OAAOC,wBAAP,CAAgCmD,MAAhC,EAAwCE,WAAWE,CAAX,CAAxC,CAHF;AAID;AACF;AACF,GAbD,MAcK;AACH,SAAK,IAAIE,QAAT,IAAqBN,MAArB,EAA6B;AAC3BC,kBAAYK,QAAZ,IAAwBN,OAAOM,QAAP,CAAxB;AACD;AACF;AACF;;AAED,SAAS9B,OAAT,CAAiBvD,WAAjB,EAA8B;AAC5B,MAAIsF,OAAOtF,YAAYsF,IAAvB,CAD4B,CAG5B;AACA;AACA;AACA;AACA;;AACA,MAAIC,kBAAkBvF,YAAYY,QAAZ,GAAuB4E,MAAvB,CAA8B,CAA9B,EAAiC,CAAjC,MAAwC,OAA9D;AAEA,MAAIC,cAAcF,kBAAkB,IAAlB,GAAyB,IAA3C;;AAEA,MAAIG,qBAAqB,CAAE,MAAM,YAAW;AAE1C;AACA;AACA;AACA;AACA;AACA,QAAI,CAACD,WAAD,IAAgB,gBAAgBC,kBAApC,EAAwD;AACtD;AACA;AACA;AACA;AACA,UAAID,gBAAgB,KAApB,EAA2B;AACzB,YAAIE,cAAc3F,YAAY4E,KAAZ,CAAkB,IAAlB,EAAwBjC,SAAxB,CAAlB;AACA,eAAQ,OAAOgD,WAAP,KAAuB,QAAvB,IAAmCA,WAApC,IAAoD,IAA3D;AACD;;AACD,UAAI;AACFF,sBAAc,KAAd;AACA,YAAIE,cAAc3F,YAAY4E,KAAZ,CAAkB,IAAlB,EAAwBjC,SAAxB,CAAlB;AACA,eAAQ,OAAOgD,WAAP,KAAuB,QAAvB,IAAmCA,WAApC,IAAoD,IAA3D;AACD,OAJD,CAKA,OAAOC,KAAP,EAAc;AACZ;AACA;AACA;AACA,YAAIA,iBAAiBvD,SAAjB,KACF,qBAAqBwD,IAArB,CAA0BD,MAAME,OAAhC,KACA,0BAA0BD,IAA1B,CAA+BD,MAAME,OAArC,CAFE,CAE4C;AAC9C;AACA;AAJE,SAAJ,EAKG;AACC;AACAL,wBAAc,IAAd;AACH,SARD,MASK;AACD,cACI,uBAAuBI,IAAvB,CAA4BD,MAAME,OAAlC,KACAnE,OAAOoE,MAAP,CAAc/F,YAAYiE,SAA1B,aAAgD+B,IAFpD,EAGE;AACEC,oBAAQL,KAAR,CAAe;;2EAE4C5F,YAAYsF,IAAK;iBAF5E,EAGGtF,WAHH;AAIH;;AAED,gBAAM4F,KAAN;AACH;AACF;AACF,KAhDyC,CAiD1C;AACA;;;AACA,QAAIM,SAAJ;AACA,QAAIC,eAAe,KAAnB;;AACA,QAAIxC,iBAAJ,EAAuB;AACrByC,WAAK,wBAAL;AACA,UAAIF,SAAJ,EAAeC,eAAe,IAAf;AAChB;;AACD,QAAK,CAACxC,iBAAD,IAAsB,CAACwC,YAA5B,EAA2C;AACzCD,kBAAa,gBAAgBR,kBAAjB,GACT,KAAK1F,WADI,GACUA,WADtB;AAED;;AACD,QAAI2F,cAActB,UAAUrE,WAAV,EAAuB2C,SAAvB,EAAkCuD,SAAlC,CAAlB,CA7D0C,CA8D1C;;AACA,QAAI,gBAAgBR,kBAApB,EAAwC;AACtCxB,mBAAa,IAAb,EAAmByB,WAAnB;AACD;;AACD,WAAOA,WAAP;AAED,GApEwB,GAAzB;;AAsEA,MAAKL,IAAL,EAAY;AACV,UAAM3E,OAAOF,sEAAeA,CAAEiF,kBAAjB,CAAb;AAEAA,yBAAqBnB,SAAS,sEAAT,EAAkF;0CACjEe,IAAK,QAAO3E,IAAK;;KADlC,EAGlBX,WAHkB,EAGLqE,SAHK,EAGMH,YAHN,EAGoBuB,WAHpB,EAGiC9B,iBAHjC,CAArB;AAID,GAzF2B,CA2F5B;;;AACA,MAAK3D,YAAY4C,MAAjB,EAA0B;AACtB;AACA;AACAxB,wEAAaA,CAAEsE,kBAAf,EAAmC,QAAnC,EAA6C;AACzCpD,aAAOtC,YAAY4C;AADsB,KAA7C;AAGH;;AAED8C,qBAAmBzB,SAAnB,GAA+BtC,OAAOoE,MAAP,CAAe/F,YAAYiE,SAA3B,CAA/B;AACAyB,qBAAmBzB,SAAnB,CAA6BjE,WAA7B,GAA2C0F,kBAA3C,CArG4B,CAuG5B;AACA;AACA;AACA;;AACA1F,cAAYiE,SAAZ,CAAsBjE,WAAtB,GAAoCA,WAApC,CA3G4B,CA6G5B;AACA;AACA;AACA;;AACA0F,qBAAmB9B,gBAAnB,IAAuC5D,WAAvC;AAEA8E,iBAAe9E,WAAf,EAA4B0F,kBAA5B;AACAxB,eAAawB,kBAAb,EAAiC1F,WAAjC;AAEA,SAAO0F,kBAAP;AACD;;AAAA,C,CAED;;AACA,SAASjC,iBAAT,CAA2B4C,OAA3B,EAAoCC,YAAY,IAAhD,EAAsD;AACpD,MAAI;AAAE,WAAO,CAAC,CAAC/B,SAAS,EAAT,EAAa,CAAC+B,YAAY,eAAZ,GAA8B,EAA/B,IAAqCD,OAAlD,CAAT;AAAsE,GAA5E,CACA,OAAOT,KAAP,EAAc;AAAE,WAAO,KAAP;AAAe;AAChC,C;;;;;;;;;;;;;;;;;ACrSD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAUA,MAAMW,kBAAkB,CAAE,UAAF,EAAc,SAAd,EACpB,GAAG5E,OAAOwB,mBAAP,CAA4B,IAAIoB,QAAJ,EAA5B,CADiB,CAAxB;AAIA,MAAMiC,8BAA8B,IAAItG,OAAJ,EAApC;AACA,MAAMuG,4BAA4B,IAAIvG,OAAJ,EAAlC,C,CAEA;AACA;;AACA,MAAMwG,oBAAoB,IAAI3G,8BAAJ,EAA1B,C,CAEA;;AACA,MAAM4G,8BAA8B,IAAIzG,OAAJ,EAApC;AAEA,MAAM0G,0BAA0B,IAAI1G,OAAJ,EAAhC;AACA,MAAM2G,6BAA6B,IAAI3G,OAAJ,EAAnC;AACA,MAAM4G,2BAA2B,IAAI5G,OAAJ,EAAjC;AACA,MAAM6G,yBAAyB,IAAI7G,OAAJ,EAA/B;AAEA,MAAM8G,iBAAiB;AAEnB;AACA;AACAC,QAAM,KAJa;AAMnB;AACA;AACAC,gBAAc,KARK;AAUnB;AACAC,qBAAmB,KAXA;AAYnBC,0BAAwB;AACpB7E,cAAU,IADU;AAEpBrB,gBAAY,KAFQ;AAGpBC,kBAAc;AAHM,GAZL;AAiBnBkG,uBAAqB;AAjBF,CAAvB;;AAqBA,MAAMC,uBAAN,SAAsCC,KAAtC,CAA4C;;AAC5C,MAAMC,kBAAN,SAAiCD,KAAjC,CAAuC;;AAEvC,MAAME,QAAQC,mBAAd;;AAEA,SAASA,iBAAT,CAA4BC,OAA5B,EAAsC;AAClCA,YAAUA,4BAAeX,cAAf,EAAkCW,OAAlC,IAA8CX,cAAxD;AAEAW,UAAQP,sBAAR,qBACOJ,eAAeI,sBADtB,EAEOO,QAAQP,sBAFf;AAKA,QAAM;AACFH,QADE;AACIE,qBADJ;AACuBE,uBADvB;AAC4CH;AAD5C,MAEFS,OAFJ;AAIA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA,SAAO,SAASF,KAAT,CAAgB,GAAGhD,IAAnB,EAA0B;AAE7B,QAAImD,4BAA4B,KAAhC,CAF6B,CAI7B;;AACA,QAAK,OAAO,IAAP,KAAgB,UAArB,EAAkCA,4BAA4B,IAA5B,CALL,CAO7B;AACA;AACA;AACA;;AACA,QAAKnD,KAAK7B,MAAL,IAAe,CAApB,EAAwB;AAEpB,UAAI0C,OAAO,EAAX;AACA,UAAIuC,UAAU,IAAd;AACA,UAAIC,aAAa,IAAjB,CAJoB,CAMpB;;AACA,UAAK,OAAOrD,KAAK,CAAL,CAAP,KAAmB,QAAxB,EAAmCa,OAAOb,KAAK,CAAL,CAAP,CAAnC,CAEA;AAFA,WAGK,IACD,OAAOA,KAAK,CAAL,CAAP,KAAmB,UAAnB,IAAiC,OAAOA,KAAK,CAAL,CAAP,KAAmB,QADnD,EAEH;AACEoD,oBAAUpD,KAAK,CAAL,CAAV;AACAqD,uBAAarD,KAAK,CAAL,CAAb;AACH,SAfmB,CAiBpB;;AACA,UAAK,OAAOA,KAAK,CAAL,CAAP,KAAmB,UAAnB,IAAiC,OAAOA,KAAK,CAAL,CAAP,KAAmB,QAAzD,EAAoE;AAChEoD,kBAAUpD,KAAK,CAAL,CAAV;AACAqD,qBAAarD,KAAK,CAAL,CAAb;AACH,OArBmB,CAuBpB;AACA;;;AACA,YAAMsD,OAAOH,4BACTI,YAAYC,IAAZ,CAAkB,IAAlB,EAAwB3C,IAAxB,EAA8BuC,OAA9B,EAAuCC,UAAvC,CADS,GAETE,YAAa1C,IAAb,EAAmBuC,OAAnB,EAA4BC,UAA5B,CAFJ,CAzBoB,CA6BpB;AACA;AACA;AACA;;AACAC,WAAKG,OAAL,GAAe,UAAUC,WAAV,EAAuBC,GAAvB,EAA4BC,KAA5B,EAAoC;AAC/CD,cAAMA,OAAOP,OAAb;AACAQ,gBAAQA,SAASP,UAAjB;AACA,eAAOE,YAAYC,IAAZ,CAAkBE,WAAlB,EAA+B7C,IAA/B,EAAqC8C,GAArC,EAA0CC,KAA1C,CAAP;AACH,OAJD;;AAMA,aAAON,IAAP;AACH;;AAED,UAAM,IAAI1F,SAAJ,CAAe,cAAf,CAAN;AACH,GAtDD;AAwDA;;;;;;;;;;;AAUA,WAAS2F,WAAT,CAAsBM,SAAtB,EAAiCT,OAAjC,EAA0CC,UAA1C,EAAuD;AACnD,iBADmD,CAGnD;;AACA,QAAIK,cAAc,IAAlB;;AAEA,QAAK,OAAOG,SAAP,KAAqB,QAA1B,EAAqC;AACjC,YAAM,IAAIjG,SAAJ,CAAe;;aAAf,CAAN;AAGH;;AAED,QAAIkG,aAAa,IAAjB,CAZmD,CAcnD;;AACA,QAAKV,WAAW,OAAOA,OAAP,KAAmB,QAAnC,EAA8C;AAC1CU,mBAAaV,OAAb;AACH,KAFD,CAIA;AACA;AACA;AANA,SAOK,IACD,CAACM,WAAD,KACI,CAACN,OAAD,IACI,OAAOA,OAAP,KAAmB,UAAnB,IACA,OAAOA,OAAP,KAAmB,QAH3B,CADC,EAOH;AACE,YAAIE,IAAJ;AAEA,YAAKb,gBAAgBoB,SAArB,EACIP,OAAO,IAAIxD,QAAJ,CAAe,mBAAmB+D,SAAW,OAA7C,GAAP,CADJ,KAEK;AACD;AACAP,iBAAO,CAAE,MAAM,YAAW,CAAE,CAArB,GAAP;;AAEA,cAAKO,SAAL,EACIlH,sCAAaA,CAAE2G,IAAf,EAAqB,MAArB,EAA6B;AAAEzF,mBAAOgG;AAAT,WAA7B;AACP;AAEDP,aAAK9D,SAAL,GAAiB;AAAElB,qBAAWpB,OAAOsC,SAApB;AAA+BjE,uBAAa+H,IAA5C,CAEjB;;AAFiB,SAAjB;AAIA3G,8CAAaA,CAAC2G,IAAd,EAAoB,UAApB,EAAgC;AAC5BzF,iBAAOmF,KADqB;AAE5BlF,oBAAU,IAFkB;AAEZ;AAChBrB,sBAAY,KAHgB;AAI5BC,wBAAc;AAJc,SAAhC;AAOA,eAAO4G,IAAP;AACH,OAtDkD,CAwDnD;AACA;AACA;AACA;AACA;AACA;;;AACA,UAAMS,0BAA0BV,aAAa,KAAKW,SAAlB,GAA8B,IAAI1I,8BAAJ,EAA9D;;AAEA,QAAI+H,UAAJ,EAAgB;AACZ,UAAI,CAACf,uBAAuBzG,GAAvB,CAA2BwH,UAA3B,CAAL,EACIf,uBAAuB5G,GAAvB,CAA2B2H,UAA3B,EAAuC,IAAI/H,8BAAJ,EAAvC;AACP,KAnEkD,CAqEnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA+H,iBAAaA,cAAc;AAAEO,aAAO,SAAT,CAE3B;;AAF2B,KAA3B;AAGA,UAAMK,QAAQ;AACVJ,eADU;;AACC;AAEX,UAAIK,eAAJ,GAAsB;AAClB,eAAOH,0BACDA,uBADC,GAEDzB,uBAAuBzG,GAAvB,CAA2BwH,UAA3B,CAFN;AAGH,OAPS;;AASVA,gBATU;AAWV;AACA;AACAc,4BAAsB,IAAI1I,OAAJ,EAbZ;AAcV2I,+BAAyB,IAAI3I,OAAJ,EAdf;AAeV4I,6BAAuB,IAAI5I,OAAJ,EAfb,CAkBd;;AAlBc,KAAd;AAmBA,UAAM6I,SAAS,IAAI7I,OAAJ,EAAf;AACA,UAAM8I,QAAQC,YAAYC,IAAZ,CAAkB,IAAlB,EAAwBH,MAAxB,EAAgCL,KAAhC,CAAd,CApGmD,CAsGnD;;AACA,UAAMS,SAASC,iBAAiBF,IAAjB,CAAuB,IAAvB,EAA6BR,KAA7B,CAAf;AACA,UAAMW,YAAYC,oBAAoBJ,IAApB,CAA0B,IAA1B,EAAgCR,KAAhC,CAAlB;AACA,UAAMa,UAAUC,kBAAkBN,IAAlB,CAAwB,IAAxB,EAA8BR,KAA9B,CAAhB;AAEAS,WAAOlF,SAAP,GAAmB,EAAnB;AACAoF,cAAUpF,SAAV,GAAsB,EAAtB;AACAsF,YAAQtF,SAAR,GAAoB,EAApB,CA7GmD,CA+GnD;;AACAkF,WAAOA,MAAP,GAAgBA,MAAhB;AACAA,WAAOE,SAAP,GAAmBA,SAAnB;AACAF,WAAOI,OAAP,GAAiBA,OAAjB;AACAJ,WAAOH,KAAP,GAAeA,KAAf;AACAK,cAAUF,MAAV,GAAmBA,MAAnB;AACAE,cAAUA,SAAV,GAAsBA,SAAtB;AACAA,cAAUE,OAAV,GAAoBA,OAApB;AACAF,cAAUL,KAAV,GAAkBA,KAAlB,CAvHmD,CAwHnD;AAEA;;AACAT,iBAAaA,cAAcV,WAAWA,QAClCsB,MADkC,EAC1BE,SAD0B,EACfE,OADe,EACNP,KADM,CAAtC,CA3HmD,CA+HnD;AACA;;AACA,QAAKT,cAAc,OAAOA,UAAP,KAAsB,QAApC,IAAgD,OAAOA,UAAP,KAAsB,UAA3E,EAAwF;AACpF,YAAM,IAAIlG,SAAJ,CAAe;;;aAAf,CAAN;AAIH,KAtIkD,CAwInD;AACA;;;AACA,QAAIoH,cAAc,IAAlB;;AACA,QAAK,OAAOlB,UAAP,KAAsB,UAA3B,EAAwC;AACpCkB,oBAAclB,UAAd;AACAA,mBAAaA,WAAWtE,SAAxB;AACAkE,oBAAcsB,YAAYxF,SAAZ,CAAsBlB,SAAtB,CAAgC/C,WAA9C;AACH;;AAED,QAAI0J,aAAJ,CAjJmD,CAmJnD;AACA;AACA;;AACA,QAAKnB,UAAL,EAAkB;AAEdmB,sBAAgBnB,WAAWoB,MAA3B;AACA,aAAOpB,WAAWoB,MAAlB;;AAEA,UAAK,OAAOpB,WAAWqB,MAAlB,KAA6B,UAAlC,EAA+C;AAC3CrB,mBAAWqB,MAAX,GAAoBrB,WAAWqB,MAAX,CAChBP,SADgB,EACLE,OADK,CAApB;AAGH;;AAED,UAAK,OAAOhB,WAAWsB,SAAlB,KAAgC,UAArC,EAAkD;AAC9CtB,mBAAWsB,SAAX,GAAuBtB,WAAWsB,SAAX,CACnBV,MADmB,EACXI,OADW,CAAvB;AAGH;;AAED,UAAK,OAAOhB,WAAWuB,OAAlB,KAA8B,UAAnC,EAAgD;AAC5CvB,mBAAWuB,OAAX,GAAqBvB,WAAWuB,OAAX,CACjBX,MADiB,EACTE,SADS,CAArB;AAGH;AAEJ;;AAEDlB,kBAAcA,eAAexG,MAA7B,CA/KmD,CAiLnD;;AACA,UAAMoI,wBAAwB5B,YAAYlE,SAA1C;AACA,UAAM+F,kBAAkBzB,cAAcA,WAAWqB,MAAzB,IACpBrB,UADoB,IACN5G,OAAOoE,MAAP,CAAegE,qBAAf,CADlB;AAEA,QAAKC,gBAAgBjH,SAAhB,KAA8BgH,qBAAnC,EACIC,gBAAgBjH,SAAhB,GAA4BgH,qBAA5B,CAtL+C,CAwLnD;;AACA,UAAME,2BAA2BC,4BAA6BH,qBAA7B,CAAjC;AACA,UAAMI,qBAAqB5B,cAAcA,WAAWsB,SAAzB,IACpBlI,OAAOoE,MAAP,CAAekE,wBAAf,CADP;AAEA,QAAKE,mBAAmBpH,SAAnB,KAAiCkH,wBAAtC,EACIE,mBAAmBpH,SAAnB,GAA+BkH,wBAA/B;AACJzD,gCAA4BrG,GAA5B,CAAiC6J,eAAjC,EAAkDG,kBAAlD,EA9LmD,CAgMnD;AACA;;AACA,UAAMC,yBAAyBC,0BAA2BN,qBAA3B,CAA/B;AACA,UAAMO,mBAAmB/B,cAAcA,WAAWuB,OAAzB,IAClBnI,OAAOoE,MAAP,CAAeqE,sBAAf,CADP;AAEA,QAAKE,iBAAiBvH,SAAjB,KAA+BqH,sBAApC,EACIE,iBAAiBvH,SAAjB,GAA6BqH,sBAA7B;AACJ3D,8BAA0BtG,GAA1B,CAA+B6J,eAA/B,EAAgDM,gBAAhD;AAEA,QAAI,CAAC1D,wBAAwBtG,GAAxB,CAA4BwH,UAA5B,CAAL,EAA8ClB,wBAAwBzG,GAAxB,CAA4B2H,UAA5B,EAAwC,IAAIxE,GAAJ,EAAxC;AAC9C,QAAI,CAACuD,2BAA2BvG,GAA3B,CAA+BwH,UAA/B,CAAL,EAAiDjB,2BAA2B1G,GAA3B,CAA+B2H,UAA/B,EAA2C,IAAIxE,GAAJ,EAA3C;AACjD,QAAI,CAACwD,yBAAyBxG,GAAzB,CAA6BwH,UAA7B,CAAL,EAA+ChB,yBAAyB3G,GAAzB,CAA6B2H,UAA7B,EAAyC,IAAIxE,GAAJ,EAAzC;AAE/CsD,4BAAwBtG,GAAxB,CAA4BwH,UAA5B,EAAwCyC,GAAxC,CAA4CP,eAA5C;AACAnD,+BAA2BvG,GAA3B,CAA+BwH,UAA/B,EAA2CyC,GAA3C,CAA+CJ,kBAA/C;AACArD,6BAAyBxG,GAAzB,CAA6BwH,UAA7B,EAAyCyC,GAAzC,CAA6CD,gBAA7C;AAEA5B,UAAMsB,eAAN,GAAwBA,eAAxB;AACAtB,UAAM4B,gBAAN,GAAyBA,gBAAzB;AACA5B,UAAMyB,kBAAN,GAA2BA,kBAA3B;AACAzB,UAAMqB,qBAAN,GAA8BA,qBAA9B;AACArB,UAAMuB,wBAAN,GAAiCA,wBAAjC;AACAvB,UAAM0B,sBAAN,GAA+BA,sBAA/B,CAtNmD,CAwNnD;AACA;AACA;AACA;;AACAI,oBAAgBrB,OAAOlF,SAAvB,EAAkC+F,eAAlC;AACAQ,oBAAgBnB,UAAUpF,SAA1B,EAAqCkG,kBAArC;AACAK,oBAAgBjB,QAAQtF,SAAxB,EAAmCqG,gBAAnC;;AAEA,QAAK/B,UAAL,EAAkB;AACd;AACA;AACA,aAAOA,WAAWqB,MAAlB;AACA,aAAOrB,WAAWsB,SAAlB;AACA,aAAOtB,WAAWuB,OAAlB,CALc,CAOd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,UAAIvB,eAAeyB,eAAnB,EAAoC;AAEhC;AACAQ,wBAAgBjC,UAAhB,EAA4ByB,eAA5B;AACH;AACJ;;AAED,QAAKP,WAAL,EAAmB;AACf,UAAKC,aAAL,EAAqBc,gBAAiBd,aAAjB,EAAgCD,WAAhC;AACrB,aAAOA,WAAP;AACH;;AAED,UAAMgB,kBACFT,gBAAgBU,cAAhB,CAA+B,aAA/B,IACAV,gBAAgBhK,WADhB,GAEA,IAHJ;AAKA,QAAI2K,WAAW,IAAf;AACA,QAAIvG,eAAe,IAAnB,CAnQmD,CAqQnD;;AACA,QAAK6C,SAAS,KAAd,EAAsB;AAElB0D,iBAAW,CAAE,MAAM,YAAW;AAE1B,YAAIC,MAAM,IAAV;AAEA,YAAI5K,cAAc,IAAlB;AAEA,YAAKyK,eAAL,EAAuBzK,cAAcyK,eAAd,CAAvB,KACKzK,cAAcmI,WAAd,CAPqB,CAS1B;AACA;AACA;;AACA,YAAKnI,gBAAgB2B,MAArB,EACIiJ,MAAM5K,YAAY4E,KAAZ,CAAmB,IAAnB,EAAyBjC,SAAzB,CAAN;;AAEJ,YAAKiI,QAAQ,OAAOA,GAAP,KAAe,QAAf,IAA2B,OAAOA,GAAP,KAAe,UAAlD,CAAL,EAAqE;AACjE;AACA;AACA,iBAAOA,GAAP;AACH;;AAED,eAAO,IAAP;AAEH,OAvBU,GAAX;;AAyBAxG,qBAAe4F,eAAf;AAEH,KA7BD,MA+BK;AACD,YAAM,IAAI3H,SAAJ,CAAe;;aAAf,CAAN;AAGH;;AAED,QAAKiG,SAAL,EAAiB;AACb,UAAKpB,YAAL,EAAoB;AAEhB,cAAMvG,OAAOF,wCAAeA,CAAEkK,QAAjB,CAAb;AACA,cAAME,QAAQF,SAAS1G,SAAvB;AAEA0G,mBAAW,IAAIpG,QAAJ,CAAc,gCAAd,EAAgD;sCACrC+D,SAAU,QAAO3H,IAAK;iBADjC,EAEP8J,eAFO,EAEUtC,WAFV,CAAX;AAIAwC,iBAAS1G,SAAT,GAAqB4G,KAArB;AACH,OAVD,MAWK;AACDzJ,8CAAaA,CAAEuJ,QAAf,EAAyB,MAAzB,EAAiC;AAAErI,iBAAOgG;AAAT,SAAjC;AACH;AACJ;;AAED,QAAKmC,mBAAmBA,gBAAgB7H,MAAxC,EAAiD;AAC7C;AACA;AACAxB,4CAAaA,CAAEuJ,QAAf,EAAyB,QAAzB,EAAmC;AAC/BrI,eAAOmI,gBAAgB7H;AADQ,OAAnC;AAGH,KAlUkD,CAoUnD;AAEA;;;AACA+H,aAAS5H,SAAT,GAAqBoF,WAArB;AAEA,QAAKuB,aAAL,EAAqBc,gBAAiBd,aAAjB,EAAgCiB,QAAhC,EAzU8B,CA2UnD;AACA;AACA;;AACAvJ,0CAAaA,CAACuJ,QAAd,EAAwB,UAAxB,EAAoC;AAChCrI,aAAOmF,KADyB;AAEhClF,gBAAU,IAFsB;AAGhCrB,kBAAY,KAHoB;AAIhCC,oBAAc;AAJkB,KAApC,EA9UmD,CAqVnD;AAEA;;AAEAwJ,aAAS1G,SAAT,GAAqBG,YAArB;AAEAuG,aAAS1G,SAAT,CAAmBjE,WAAnB,GAAiC2K,QAAjC,CA3VmD,CA6VnD;;AAEA,QAAKtD,mBAAL,EAA2B;AACvByD,kCAA6BH,QAA7B,EAAuChD,OAAvC;AACAvG,4CAAaA,CAACuJ,QAAd,EAAwB,WAAxB,EAAqC;AAACpI,kBAAU4E;AAAX,OAArC;AACA4D,qCAAgCJ,SAAS1G,SAAzC,EAAoD0D,OAApD;AACAoD,qCAAgCZ,kBAAhC,EAAoDxC,OAApD;AACAoD,qCAAgCT,gBAAhC,EAAkD3C,OAAlD;AACH;;AAEDe,UAAM1I,WAAN,GAAoB2K,QAApB,CAvWmD,CAuWtB;;AAE7B,WAAOA,QAAP;AACH;AACJ,C,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,SAAST,2BAAT,CAAqCH,qBAArC,EAA4D;AACxD;AAEA,MAAIiB,oBAAJ;AACA,MAAIC,qBAAqBlB,qBAAzB;;AAEA,SAAOkB,sBAAsB,CAACD,oBAA9B,EAAoD;AAChDA,2BAAuBxE,4BAA4BlG,GAA5B,CAAiC2K,kBAAjC,CAAvB;AACAA,yBAAqBA,mBAAmBlI,SAAxC;AACH,GATuD,CAWxD;AACA;AACA;AACA;;;AACA,SAAOiI,wBAAwB,EAA/B;AACH;;AAED,SAASX,yBAAT,CAAmCN,qBAAnC,EAA0D;AACtD;AAEA,MAAImB,kBAAJ;AACA,MAAID,qBAAqBlB,qBAAzB;;AAEA,SAAOkB,sBAAsB,CAACC,kBAA9B,EAAkD;AAC9CA,yBAAqBzE,0BAA0BnG,GAA1B,CAA+B2K,kBAA/B,CAArB;AACAA,yBAAqBA,mBAAmBlI,SAAxC;AACH,GATqD,CAWtD;AACA;AACA;AACA;;;AACA,SAAOmI,sBAAsB,EAA7B;AACH;;AAED,SAAS9B,gBAAT,CAA2BV,KAA3B,EAAkC/D,QAAlC,EAA6C;AACzC,MAAIlC,SAASiG,MAAME,oBAAN,CAA2BtI,GAA3B,CAA+BqE,QAA/B,CAAb;AAEA,MAAIlC,MAAJ,EAAY,OAAOA,MAAP,CAH6B,CAKzC;;AACA,MAAK0I,kBAAmBzC,KAAnB,EAA0B/D,QAA1B,CAAL,EACI+D,MAAME,oBAAN,CAA2BzI,GAA3B,CAA+BwE,QAA/B,EAAyClC,SAAS2I,iBAAkBzG,QAAlB,EAA6BgE,eAA7B,CAA6CrI,GAA7C,CAAkDqE,QAAlD,CAAlD,EADJ,CAGA;AAHA,OAIK,IAAK0G,oBAAqB3C,KAArB,EAA4B/D,QAA5B,CAAL,EACD+D,MAAME,oBAAN,CAA2BzI,GAA3B,CAA+BwE,QAA/B,EAAyClC,SAASiE,kBAAkBpG,GAAlB,CAAuBqE,QAAvB,CAAlD,EADC,CAGL;AAHK,SAIA+D,MAAME,oBAAN,CAA2BzI,GAA3B,CAA+BwE,QAA/B,EAAyClC,SAASkC,QAAlD;AAEL,SAAOlC,MAAP;AACH;;AAED,SAAS6G,mBAAT,CAA8BZ,KAA9B,EAAqC/D,QAArC,EAAgD;AAC5C,MAAIlC,SAASiG,MAAMG,uBAAN,CAA8BvI,GAA9B,CAAkCqE,QAAlC,CAAb;AAEA,MAAIlC,MAAJ,EAAY,OAAOA,MAAP,CAHgC,CAK5C;AACA;AACA;;AACA,MAAK6I,iBAAkB5C,KAAlB,EAAyB/D,QAAzB,CAAL,EACI+D,MAAMG,uBAAN,CAA8B1I,GAA9B,CAAkCwE,QAAlC,EAA4ClC,SAASiE,kBAAkBpG,GAAlB,CAAuBqE,QAAvB,KAAqC4G,wBAAyB5G,QAAzB,CAA1F,EADJ,CAGA;AAHA,OAIK,IAAKwG,kBAAmBzC,KAAnB,EAA0B/D,QAA1B,CAAL,EAA4C;AAC7C,YAAM6G,iBAAiBJ,iBAAkBzG,QAAlB,EAA6BgE,eAA7B,CAA6CrI,GAA7C,CAAkDqE,QAAlD,CAAvB;AACA+D,YAAMG,uBAAN,CAA8B1I,GAA9B,CAAkCwE,QAAlC,EAA4ClC,SAASiE,kBAAkBpG,GAAlB,CAAuBkL,cAAvB,KAA2CD,wBAAyBC,cAAzB,CAAhG;AACH,KAHI,CAKL;AALK,SAMA,IAAKH,oBAAqB3C,KAArB,EAA4B/D,QAA5B,CAAL,EACD+D,MAAMG,uBAAN,CAA8B1I,GAA9B,CAAkCwE,QAAlC,EAA4ClC,SAASkC,QAArD;AAEJ,MAAI,CAAClC,MAAL,EAAa,MAAM,IAAI+E,kBAAJ,CAAuB,oCAAvB,CAAN;AAEb,SAAO/E,MAAP;AACH;;AAED,SAAS2I,gBAAT,CAA2BK,eAA3B,EAA6C;AACzC,SAAO9E,4BAA4BrG,GAA5B,CAAiCmL,eAAjC,CAAP;AACH;;AAED,SAASF,uBAAT,CAAkCC,cAAlC,EAAmD;AAE/C;AACA,QAAMrB,qBAAqBuB,+BAAgCF,cAAhC,CAA3B,CAH+C,CAK/C;;AACA,QAAMG,oBAAoBhK,OAAOoE,MAAP,CAAeoE,kBAAf,CAA1B;AACAzD,oBAAkBvG,GAAlB,CAAuBqL,cAAvB,EAAuCG,iBAAvC;AACA,SAAOA,iBAAP;AACH;;AAED,SAASD,8BAAT,CAAyCF,cAAzC,EAA0D;AACtD,MAAI/I,SAAS,IAAb;AACA,MAAII,eAAe2I,eAAezI,SAAlC;;AAEA,SAAQF,YAAR,EAAuB;AACnBJ,aAAS+D,4BAA4BlG,GAA5B,CAAiCuC,YAAjC,CAAT;AACA,QAAKJ,MAAL,EAAc,OAAOA,MAAP;AACdI,mBAAeA,aAAaE,SAA5B;AACH;;AAED,SAAON,MAAP;AACH;;AAED,SAAS+G,iBAAT,CAA4Bd,KAA5B,EAAmC/D,QAAnC,EAA8C;AAC1C,MAAIlC,SAASiG,MAAMI,qBAAN,CAA4BxI,GAA5B,CAAgCqE,QAAhC,CAAb;AAEA,MAAIlC,MAAJ,EAAY,OAAOA,MAAP,CAH8B,CAK1C;;AACA,MAAK6I,iBAAkB5C,KAAlB,EAAyB/D,QAAzB,CAAL,EACI+D,MAAMI,qBAAN,CAA4B3I,GAA5B,CAAgCwE,QAAhC,EAA0ClC,SAASiG,MAAMC,eAAN,CAAsBrI,GAAtB,CAA2BqE,QAA3B,KAAyCiH,sBAAuBlD,KAAvB,EAA8B/D,QAA9B,CAA5F,EADJ,CAGA;AACA;AAJA,OAKK,IAAK0G,oBAAqB3C,KAArB,EAA4B/D,QAA5B,CAAL,EAA8C;AAC/C,YAAM6G,iBAAiB9E,kBAAkBpG,GAAlB,CAAuBqE,QAAvB,CAAvB;AACA+D,YAAMI,qBAAN,CAA4B3I,GAA5B,CAAgCwE,QAAhC,EAA0ClC,SAASiG,MAAMC,eAAN,CAAsBrI,GAAtB,CAA2BkL,cAA3B,KAA+CI,sBAAuBlD,KAAvB,EAA8B8C,cAA9B,CAAlG;AACH,KAHI,CAKL;AALK,SAMA,IAAKL,kBAAmBzC,KAAnB,EAA0B/D,QAA1B,CAAL,EACD+D,MAAMI,qBAAN,CAA4B3I,GAA5B,CAAgCwE,QAAhC,EAA0ClC,SAASkC,QAAnD;AAEJ,MAAI,CAAClC,MAAL,EAAa,MAAM,IAAI+E,kBAAJ,CAAuB,kCAAvB,CAAN;AAEb,SAAO/E,MAAP;AACH;;AAED,SAASmJ,qBAAT,CAAgClD,KAAhC,EAAuC8C,cAAvC,EAAwD;AACpD,QAAMC,kBAAkB9J,OAAOoE,MAAP,CAAe2C,MAAM4B,gBAArB,CAAxB;AACA5B,QAAMC,eAAN,CAAsBxI,GAAtB,CAA2BqL,cAA3B,EAA2CC,eAA3C;AACA9E,8BAA4BxG,GAA5B,CAAiCsL,eAAjC,EAAkD/C,KAAlD,EAHoD,CAGM;;AAC1D,SAAO+C,eAAP;AACH;;AAED,SAASH,gBAAT,CAA2B5C,KAA3B,EAAkC/D,QAAlC,EAA4CkH,eAAe,IAA3D,EAAkE;AAC9D,MAAI,CAACA,YAAL,EACI,OAAOC,aAAanH,QAAb,EAAuB+D,MAAMsB,eAA7B,CAAP;;AAEJ,OAAK,MAAMa,KAAX,IAAoBzH,MAAMC,IAAN,CAAWuD,wBAAwBtG,GAAxB,CAA4BoI,MAAMZ,UAAlC,CAAX,CAApB,EAA+E;AAC3E,QAAIgE,aAAanH,QAAb,EAAuBkG,KAAvB,CAAJ,EAAmC,OAAO,IAAP;AACtC;;AAED,SAAO,KAAP;AACH;;AAED,SAASQ,mBAAT,CAA8B3C,KAA9B,EAAqC/D,QAArC,EAA+CkH,eAAe,IAA9D,EAAqE;AACjE,MAAI,CAACA,YAAL,EACI,OAAOC,aAAanH,QAAb,EAAuB+D,MAAMyB,kBAA7B,CAAP;;AAEJ,OAAK,MAAMU,KAAX,IAAoBzH,MAAMC,IAAN,CAAWwD,2BAA2BvG,GAA3B,CAA+BoI,MAAMZ,UAArC,CAAX,CAApB,EAAkF;AAC9E,QAAIgE,aAAanH,QAAb,EAAuBkG,KAAvB,CAAJ,EAAmC,OAAO,IAAP;AACtC;;AAED,SAAO,KAAP;AACH;;AAED,SAASM,iBAAT,CAA4BzC,KAA5B,EAAmC/D,QAAnC,EAA6CkH,eAAe,IAA5D,EAAmE;AAC/D,MAAI,CAACA,YAAL,EACI,OAAOC,aAAanH,QAAb,EAAuB+D,MAAM4B,gBAA7B,CAAP;;AAEJ,OAAK,MAAMO,KAAX,IAAoBzH,MAAMC,IAAN,CAAWyD,yBAAyBxG,GAAzB,CAA6BoI,MAAMZ,UAAnC,CAAX,CAApB,EAAgF;AAC5E,QAAIgE,aAAanH,QAAb,EAAuBkG,KAAvB,CAAJ,EAAmC,OAAO,IAAP;AACtC;;AAED,SAAO,KAAP;AACH,C,CAED;;;AACA,SAASiB,YAAT,CAAuBzK,GAAvB,EAA4BwJ,KAA5B,EAAoC;AAChC,MAAIhI,eAAexB,IAAI0B,SAAvB;;AAEA,KAAG;AACC,QAAK8H,UAAUhI,YAAf,EAA8B,OAAO,IAAP;AAC9BA,mBAAeA,aAAaE,SAA5B;AACH,GAHD,QAGUF,YAHV;;AAKA,SAAO,KAAP;AACH,C,CAED;;;AACA,SAAS2H,eAAT,CAAyBzF,MAAzB,EAAiCC,WAAjC,EAA8C+G,GAA9C,EAAmD;AAC/C,QAAMC,QAAQrK,OAAOwB,mBAAP,CAA2B4B,MAA3B,CAAd;AACA,MAAII,IAAI6G,MAAMpJ,MAAd;;AACA,SAAOuC,GAAP,EAAY;AACR,UAAM8G,OAAOD,MAAM7G,CAAN,CAAb;AACA,UAAMzC,aAAaf,OAAOC,wBAAP,CAAgCmD,MAAhC,EAAwCkH,IAAxC,CAAnB;AACA,QAAIF,GAAJ,EAASA,IAAIrJ,UAAJ;AACTf,WAAOG,cAAP,CAAsBkD,WAAtB,EAAmCiH,IAAnC,EAAyCvJ,UAAzC;AACH;AACJ;;AAED,SAASuG,WAAT,CAAsBF,MAAtB,EAA8BL,KAA9B,EAAqC/D,QAArC,EAAgD;AAC5C,QAAM;AACFoF,yBADE;AAEFE,4BAFE;AAGFG;AAHE,MAIF1B,KAJJ;AAMA,MAAK4C,iBAAkB5C,KAAlB,EAAyB/D,QAAzB,EAAmC,KAAnC,CAAL,EACI,OAAOuH,qBAAsBvH,QAAtB,EAAgCoF,qBAAhC,EAAuDhB,MAAvD,CAAP;AAEJ,MAAKsC,oBAAqB3C,KAArB,EAA4B/D,QAA5B,EAAsC,KAAtC,CAAL,EACI,OAAOuH,qBAAqBvH,QAArB,EAA+BsF,wBAA/B,EAAyDlB,MAAzD,CAAP;AAEJ,MAAKoC,kBAAmBzC,KAAnB,EAA0B/D,QAA1B,EAAoC,KAApC,CAAL,EACI,OAAOuH,qBAAsBvH,QAAtB,EAAgCyF,sBAAhC,EAAwDrB,MAAxD,CAAP;AAEJ,QAAM,IAAIzB,uBAAJ,CAA4B,sBAA5B,CAAN;AACH;;AAED,SAAS4E,oBAAT,CAA+BvH,QAA/B,EAAyCwH,eAAzC,EAA0DpD,MAA1D,EAAmE;AAC/D,MAAIqD,SAASrD,OAAOzI,GAAP,CAAYqE,QAAZ,CAAb,CAD+D,CAG/D;;;AACA,MAAK,CAACyH,MAAN,EAAe;AACXrD,WAAO5I,GAAP,CAAYwE,QAAZ,EAAsByH,SAASzK,OAAOoE,MAAP,CAAeoG,eAAf,CAA/B;AAEA,UAAMlJ,OAAOD,kDAAyBA,CAAEmJ,eAA3B,CAAb;AACA,QAAIhH,IAAIlC,KAAKL,MAAb;;AAEA,WAAOuC,GAAP,EAAY;AACR,YAAM7D,MAAM2B,KAAKkC,CAAL,CAAZ;AAEA/D,4CAAaA,CAAEgL,MAAf,EAAuB9K,GAAvB,EAA4B;AAExBhB,aAAK,YAAW;AACZ,cAAIgC,QAAQ,KAAKmG,SAAjB;AAEA,gBAAM/F,aAAahB,+CAAsBA,CAAEyK,eAAxB,EAAyC7K,GAAzC,CAAnB;;AAEA,cAAKoB,cAAcF,2CAAkBA,CAAEE,UAApB,CAAnB,EAAsD;AAClD,kBAAM2J,SAAS3J,WAAWpC,GAA1B;AACA,gBAAK+L,MAAL,EAAc/J,QAAQ+J,OAAOpE,IAAP,CAAatD,QAAb,CAAR;AACjB,WAHD,MAIK;AACDrC,oBAAQ6J,gBAAiB7K,GAAjB,CAAR;AACH;;AAED,cAAKgB,SAASA,MAAM2F,IAAf,IAAuB,OAAO3F,KAAP,KAAiB,UAA7C,EAA0D;AACtDA,oBAAQA,MAAM4G,IAAN,CAAYvE,QAAZ,CAAR;AACH;;AAED,iBAAOrC,KAAP;AACH,SApBuB;AAsBxB;AACAnC,aAAK,UAAUmC,KAAV,EAAkB;AACnB,gBAAMI,aAAahB,+CAAsBA,CAAEyK,eAAxB,EAAyC7K,GAAzC,CAAnB;;AAEA,cAAKoB,cAAcF,2CAAkBA,CAAEE,UAApB,CAAnB,EAAsD;AAClD,kBAAM4J,SAAS5J,WAAWvC,GAA1B;AACA,gBAAKmM,MAAL,EAAchK,QAAQgK,OAAOrE,IAAP,CAAatD,QAAb,EAAuBrC,KAAvB,CAAR;AACjB,WAHD,MAIK;AACD;AACAqC,qBAAUrD,GAAV,IAAkBgB,KAAlB;AACH;AACJ;AAlCuB,OAA5B,EAoCG,IApCH;AAqCH;AACJ;;AAED,SAAO8J,MAAP;AACH;;AAED,SAASrB,8BAAT,CAAyC9G,SAAzC,EACI;AAAEmD,0BAAwB;AAAE7E,YAAF;AAAYrB,cAAZ;AAAwBC;AAAxB;AAA1B,CADJ,EAEE;AACE,QAAMoL,cAAc5K,OAAOO,yBAAP,CAAkC+B,SAAlC,CAApB;AACA,MAAIvB,UAAJ;;AAEA,OAAM,MAAMpB,GAAZ,IAAmBiL,WAAnB,EAAiC;AAC7B7J,iBAAa6J,YAAajL,GAAb,CAAb,CAD6B,CAG7B;;AACA,QAAK,WAAWoB,UAAX,IAAyB,cAAcA,UAA5C,EAAyD;AACrDA,iBAAWH,QAAX,GAAsBA,QAAtB;AACH,KAN4B,CAQ7B;;;AACAG,eAAWxB,UAAX,GAAwBA,UAAxB;AACAwB,eAAWvB,YAAX,GAA0BA,YAA1B;AACH;;AAEDY,yCAAcA,CAAEkC,SAAhB,EAA2BsI,WAA3B;AACH;;AAED,SAASzB,2BAAT,CAAsC/C,IAAtC,EACI;AAAEX,0BAAwB;AAAE7E,YAAF;AAAYrB,cAAZ;AAAwBC;AAAxB;AAA1B,CADJ,EAEE;AACE,QAAMoL,cAAc5K,OAAOO,yBAAP,CAAkC6F,IAAlC,CAApB;AACA,MAAIrF,UAAJ;;AAEA,OAAM,MAAMpB,GAAZ,IAAmBiL,WAAnB,EAAiC;AAC7B,QAAKhG,gBAAgBiG,QAAhB,CAA0BlL,GAA1B,CAAL,EAAuC;AACnC,aAAOiL,YAAajL,GAAb,CAAP;AACA;AACH;;AAEDoB,iBAAa6J,YAAajL,GAAb,CAAb,CAN6B,CAQ7B;;AACA,QAAK,WAAWoB,UAAX,IAAyB,cAAcA,UAA5C,EAAyD;AACrDA,iBAAWH,QAAX,GAAsBA,QAAtB;AACH,KAX4B,CAa7B;;;AACAG,eAAWxB,UAAX,GAAwBA,UAAxB;AACAwB,eAAWvB,YAAX,GAA0BA,YAA1B;AACH;;AAEDY,yCAAcA,CAAEgG,IAAhB,EAAsBwE,WAAtB;AACH;;AAEc9E,mDAAf;;;;;;;ACx4BA;AAGA,SAASgF,KAAT,CAAgBC,OAAhB,EAAyBC,OAAzB,EAAmC;AAE/B;AACAD,YAAUE,OAAQF,OAAR,CAAV;AACAA,YAAUG,YAAaH,OAAb,CAAV;AACAA,YAAUI,OAAQJ,OAAR,CAAV;AACAA,YAAUK,YAAaL,OAAb,EAAsBC,WAAWlF,GAAKA,EAAtC,CAAV;AACAiF,YAAUM,aAAcN,OAAd,CAAV;AAEA,SAAOA,SAAP;AACH;AAED;;AASA,SAASK,WAAT,CAAsBE,YAAtB,EAAoCN,OAApC,EAA8C;AAC1C,SAAOO,MAAMD,aAAa3H,IAAnB,EAAyB6H,QAAQ;AACpCA,WAAOA,QAAQR,OAAf;AACA,WAAOM,aAAcE,IAAd,CAAP;AACH,GAHM,CAAP;AAIH;;AAED,SAASP,MAAT,CAAiBK,YAAjB,EAAgC;AAC5B,QAAMG,aAAa,IAAIlN,OAAJ,EAAnB;AAEA,SAAOgN,MAAMD,aAAa3H,IAAnB,EAAyB6H,QAAQ;AACpC,QAAI1F,QAAQ2F,WAAW9M,GAAX,CAAgB6M,IAAhB,CAAZ;;AAEA,QAAK,CAAC1F,KAAN,EAAc;AACV2F,iBAAWjN,GAAX,CAAgBgN,IAAhB,EAAsB1F,QAAQwF,aAAcE,IAAd,CAA9B;AACH;;AAED,WAAO1F,KAAP;AACH,GARM,CAAP;AASH;;AAED,SAASoF,WAAT,CAAsBI,YAAtB,EAAqC;AACjC,MAAII,gBAAJ;AAEA,SAAOH,MAAMD,aAAa3H,IAAnB,EAAyB6H,QAAQ;AACpC,UAAM1F,QAAQwF,aAAcE,IAAd,CAAd;AAEA,QAAK,OAAOtJ,MAAP,KAAkB,WAAlB,IAAiC,CAACA,OAAOyJ,WAA9C,EACI,OAAO7F,KAAP;AAEJ,QAAK9F,OAAOuD,qBAAP,CAA8BuC,KAA9B,EAAsC+E,QAAtC,CAAgD3I,OAAOyJ,WAAvD,CAAL,EACI,OAAO7F,KAAP;AAEJ,QAAK,CAAC4F,gBAAN,EACIA,mBAAmBxJ,OAAO,kBAAP,CAAnB,CAVgC,CAYpC;AACA;;AACA4D,UAAM4F,gBAAN,IAA0B,IAA1B;AAEA1L,WAAOG,cAAP,CAAsB2F,KAAtB,EAA6B5D,OAAOyJ,WAApC,EAAiD;AAE7ChL,aAAO,SAASgL,WAAT,CAAqBjM,GAArB,EAA0B;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAI,SAASoG,KAAb,EACI;AACA,iBAAOA,MAAM1E,SAAN,CAAgBc,OAAOyJ,WAAvB,EAAoCrF,IAApC,CAAyC,IAAzC,EAA+C5G,GAA/C,CAAP;AAEJ,YAAIwB,eAAexB,GAAnB;;AAEA,eAAMwB,YAAN,EAAoB;AAChB,gBAAMH,aAAaf,OAAOC,wBAAP,CAAgCiB,YAAhC,EAA8C,aAA9C,CAAnB;AAEA,cACIH,cACAA,WAAWJ,KADX,IAEAI,WAAWJ,KAAX,CAAiBoI,cAAjB,CAAgC2C,gBAAhC,CAHJ,EAIE,OAAO,IAAP;AAEFxK,yBAAeA,aAAaE,SAA5B;AACH;;AAED,eAAO,KAAP;AAEH;AAlC4C,KAAjD;AAsCA,WAAO0E,KAAP;AACH,GAvDM,CAAP;AAwDH,C,CAED;;;AACA,SAASuF,YAAT,CAAuBC,YAAvB,EAAsC;AAClC,QAAMM,eAAeN,cAArB;AACAM,eAAaC,KAAb,GAAqBP,YAArB;AACA,SAAOA,YAAP;AACH,C,CAED;;;AACA,SAASH,MAAT,CAAiBG,YAAjB,EAAgC;AAC5B,QAAMQ,MAAM,IAAIvN,OAAJ,EAAZ;AAEA,SAAOgN,MAAMD,aAAa3H,IAAnB,EAAyB6H,QAAQ;AAEpC,QAAKO,SAAUP,IAAV,EAAgBF,YAAhB,EAA8BQ,GAA9B,CAAL,EACI,OAAON,IAAP;AAEJ,UAAM1F,QAAQwF,aAAcE,IAAd,CAAd;AACAM,QAAItN,GAAJ,CAASsH,KAAT,EAAgBwF,YAAhB;AACA,WAAOxF,KAAP;AACH,GARM,CAAP;AASH;;AAED,SAASiG,QAAT,CAAmBjG,KAAnB,EAA0B+F,KAA1B,EAAiCC,GAAjC,EAAuC;AACnC,SAAOhG,KAAP,EAAc;AACV,QAAKgG,IAAInN,GAAJ,CAAQmH,KAAR,MAAmB+F,KAAxB,EAAgC,OAAO,IAAP;AAChC/F,YAAQA,MAAM1E,SAAd;AACH;;AAED,SAAO,KAAP;AACH;;AAED,SAASmK,KAAT,CAAe5H,IAAf,EAAqBqI,IAArB,EAA2B;AACvB,MAAI;AACAhM,WAAOG,cAAP,CAAsB6L,IAAtB,EAA4B,MAA5B,yBACOhM,OAAOC,wBAAP,CAAgC+L,IAAhC,EAAsC,MAAtC,CADP;AAEIrL,aAAOgD;AAFX;AAIH,GALD,CAKE,OAAMsI,CAAN,EAAS,CACP;AACH;;AAED,SAAOD,IAAP;AACH,C;;ACpJD;AACA;AACA;AACe,SAASE,UAAT,CAAoBlJ,QAApB,EAA8BmJ,WAA9B,EAA2C;AACtD,MAAI,OAAOA,WAAP,IAAsB,UAAtB,IAAoCA,YAAYjK,OAAOyJ,WAAnB,CAAxC,EACI,OAAOQ,YAAYjK,OAAOyJ,WAAnB,EAAgC3I,QAAhC,CAAP,CADJ,KAEK,OAAOA,oBAAoBmJ,WAA3B;AACR,C;;;;;ACPD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACerG,kFAAf,E,CAEA;;CAGA;;AACA;AACA;AACA;AAEO,MAAMsG,UAAU,OAAhB,C","file":"global.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","\n\"use strict\"\n\nclass WeakTwoWayMap {\n    constructor() { this.m = new WeakMap }\n    set( a, b ) { this.m.set( a, b ); this.m.set( b, a ) }\n    get( item ) { return this.m.get( item ) }\n    has( item ) { return this.m.has( item ) }\n}\n\nexport {\n    getFunctionBody,\n    setDescriptor,\n    setDescriptors,\n    propertyIsAccessor,\n    getInheritedDescriptor,\n    getInheritedPropertyNames,\n    WeakTwoWayMap,\n}\n\n// assumes the function opening, body, and closing are on separate lines\nfunction getFunctionBody( fn ) {\n    const code = fn.toString().split(\"\\n\")\n    code.shift() // remove opening line (function() {)\n    code.pop() // remove closing line (})\n    return code.join(\"\\n\")\n}\n\nconst descriptorDefaults = {\n    enumerable: true,\n    configurable: true,\n}\n\n// makes it easier and less verbose to work with descriptors\nfunction setDescriptor( obj, key, newDescriptor, inherited = false ) {\n    let currentDescriptor = (\n        inherited ?\n        getInheritedDescriptor( obj, key ) :\n        Object.getOwnPropertyDescriptor( obj, key )\n    )\n\n    newDescriptor = overrideDescriptor( currentDescriptor, newDescriptor )\n    Object.defineProperty( obj, key, newDescriptor )\n}\n\nfunction setDescriptors( obj, newDescriptors ) {\n    let newDescriptor\n    let currentDescriptor\n    const currentDescriptors = Object.getOwnPropertyDescriptors( obj )\n\n    for ( const key in newDescriptors ) {\n        newDescriptor = newDescriptors[ key ]\n        currentDescriptor = currentDescriptors[ key ]\n        newDescriptors[ key ] = overrideDescriptor( currentDescriptor, newDescriptor )\n    }\n\n    Object.defineProperties( obj, newDescriptors )\n}\n\nfunction overrideDescriptor( oldDescriptor, newDescriptor ) {\n\n    if (\n        ( 'get' in newDescriptor || 'set' in newDescriptor ) &&\n        ( 'value' in newDescriptor || 'writable' in newDescriptor )\n    ) {\n        throw new TypeError('cannot specify both accessors and a value or writable attribute')\n    }\n\n    if ( oldDescriptor ) {\n\n        if ( 'get' in newDescriptor || 'set' in newDescriptor ) {\n            delete oldDescriptor.value\n            delete oldDescriptor.writable\n        }\n        else if ( 'value' in newDescriptor || 'writable' in newDescriptor ) {\n            delete oldDescriptor.get\n            delete oldDescriptor.set\n        }\n\n    }\n\n    return { ...descriptorDefaults, ...oldDescriptor, ...newDescriptor }\n}\n\nfunction propertyIsAccessor( obj, key, inherited = true ) {\n    let result = false\n    let descriptor\n\n    if ( arguments.length === 1 ) {\n        descriptor = obj\n    }\n    else {\n        descriptor = inherited ?\n            getInheritedDescriptor( obj, key ) :\n            Object.getOwnPropertyDescriptor( obj, key )\n    }\n\n    if ( descriptor && ( descriptor.get || descriptor.set ) ) result = true\n\n    return result\n}\n\nfunction getInheritedDescriptor( obj, key ) {\n    let currentProto = obj\n    let descriptor\n\n    while ( currentProto ) {\n        descriptor = Object.getOwnPropertyDescriptor( currentProto, key )\n\n        if ( descriptor ) {\n            descriptor.owner = currentProto\n            return descriptor\n        }\n\n        currentProto = currentProto.__proto__\n    }\n}\n\nfunction getInheritedPropertyNames( obj ) {\n    let currentProto = obj\n    let keys = []\n\n    while ( currentProto ) {\n        keys = keys.concat( Object.getOwnPropertyNames( currentProto ) )\n        currentProto = currentProto.__proto__\n    }\n\n    // remove duplicates\n    keys = Array.from( new Set( keys ) )\n\n    return keys\n}\n","// borrowed from (and slightly modified) https://github.com/Mr0grog/newless\n// The newless license is BSD 3:\n\n/*\n * Copyright (c) 2013-2016, Rob Brackett\n * Copyright (c) 2018, Joseph Orbegoso Pea\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\n *\n * 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport { getFunctionBody, setDescriptor } from './utils'\n\nexport {\n  newless as native,\n}\n\nexport default newless\n\nvar supportsSpread = isSyntaxSupported(\"Object(...[{}])\");\nvar supportsClass = isSyntaxSupported(\"class Test {}\")\nvar supportsNewTarget = isSyntaxSupported(\"new.target\")\n\n// Used to track the original wrapped constructor on a newless instance\nvar TRUE_CONSTRUCTOR = Symbol\n  ? Symbol(\"trueConstructor\")\n  : \"__newlessTrueConstructor__\";\n\n// Polyfills for get/set prototype\nvar getPrototype = Object.getPrototypeOf || function getPrototype(object) {\n  return object.__proto__ ||\n    (object.constructor && object.constructor.prototype) ||\n    Object.prototype;\n};\n\nvar setPrototype = Object.setPrototypeOf ||\n  function setPrototypeOf(object, newPrototype) {\n    object.__proto__ = newPrototype;\n  };\n\n// Polyfill for Reflect.construct\nvar construct = Reflect && Reflect.construct || (function() {\n  if (supportsClass) {\n\n    return Function(\"constructor, args, target\", `\n      'use strict';\n\n      if (arguments.length === 3 && typeof target !== 'function')\n        throw new TypeError(target + ' is not a constructor');\n\n      target = target || constructor;\n\n      // extend target so the right prototype is constructed (or nearly the\n      // right one; ideally we'd do instantiator.prototype = target.prototype,\n      // but a class's prototype property is not writable)\n      class instantiator extends target {};\n      // but ensure the *logic* is 'constructor' for ES2015-compliant engines\n      Object.setPrototypeOf(instantiator, constructor);\n      // ...and for Safari 9\n      instantiator.prototype.constructor = constructor;\n\n      // The spread operator is *dramatically faster, so use it if we can:\n      // http://jsperf.com/new-via-spread-vs-dynamic-function/4\n      ${ supportsSpread ?  `\n\n        var value = new instantiator(...([].slice.call(args)));\n\n      `:`\n\n        // otherwise, create a dynamic function in order to use 'new'\n        // Note using 'function.bind' would be simpler, but is much slower:\n        // http://jsperf.com/new-operator-with-dynamic-function-vs-bind\n        var argList = '';\n        for (var i = 0, len = args.length; i < len; i++) {\n          if (i > 0) argList += ',';\n          argList += 'args[' + i + ']';\n        }\n        var constructCall = Function('constructor, args',\n          'return new constructor( ' + argList + ' );'\n        );\n        var value = constructCall(constructor, args);\n\n        args = Array.prototype.slice.call(args);\n        args = [null].concat(args);\n        var value = new constructor.bind.apply(constructor, args);\n\n      `}\n\n      // fix up the prototype so it matches the intended one, not one who's\n      // prototype is the intended one :P\n      Object.setPrototypeOf(value, target.prototype);\n      return value;\n    `);\n\n    //return Function(\"constructor, args, newTarget\", `\n    //  'use strict';\n\n    //  if (arguments.length === 3 && typeof newTarget === undefined)\n    //    throw new TypeError('undefined is not a constructor');\n\n    //  newTarget = newTarget || constructor;\n\n    //  ${ supportsSpread ? `\n\n    //    var value = new constructor(...([].slice.call(args)));\n\n    //  `:`\n\n    //    args = Array.prototype.slice.call(args);\n    //    args = [null].concat(args);\n    //    var value = new constructor.bind.apply(constructor, args);\n\n    //  `}\n\n    //  Object.setPrototypeOf(value, newTarget.prototype);\n    //  return value;\n    //`);\n  }\n  else {\n    var instantiator = function() {};\n    return function construct(constructor, args, target) {\n      if (arguments.length === 3 && typeof target !== 'function')\n        throw new TypeError(target + ' is not a constructor');\n      instantiator.prototype = (target || constructor).prototype;\n      var instance = new instantiator();\n      var value = constructor.apply(instance, args);\n      if (typeof value === \"object\" && value) {\n        // we can do better if __proto__ is available (in some ES5 environments)\n        value.__proto__ = (target || constructor).prototype;\n        return value\n      }\n      return instance;\n    }\n  }\n})();\n\n// ES2015 class methods are non-enumerable; we need a helper for copying them.\nvar SKIP_PROPERTIES = [\"arguments\", \"caller\", \"length\", \"name\", \"prototype\"];\nfunction copyProperties(source, destination) {\n  if (Object.getOwnPropertyNames && Object.defineProperty) {\n    var properties = Object.getOwnPropertyNames(source);\n    if (Object.getOwnPropertySymbols) {\n      properties = properties.concat(Object.getOwnPropertySymbols(source));\n    }\n    for (var i = properties.length - 1; i >= 0; i--) {\n      if (SKIP_PROPERTIES.indexOf(properties[i]) === -1) {\n        Object.defineProperty(\n          destination,\n          properties[i],\n          Object.getOwnPropertyDescriptor(source, properties[i]));\n      }\n    }\n  }\n  else {\n    for (var property in source) {\n      destination[property] = source[property];\n    }\n  }\n}\n\nfunction newless(constructor) {\n  var name = constructor.name;\n\n  // V8 and newer versions of JSCore return the full class declaration from\n  // `toString()`, which lets us be a little smarter and more performant\n  // about what to do, since we know we are dealing with a \"class\". Note,\n  // however, not all engines do this. This could be false and the constructor\n  // might still use class syntax.\n  var usesClassSyntax = constructor.toString().substr(0, 5) === \"class\";\n\n  var requiresNew = usesClassSyntax ? true : null\n\n  var newlessConstructor = ( () => function() {\n\n    // If called with an already valid 'this', preserve that 'this' value\n    // in the super-type's constructor whenever possible. With function\n    // constructors (as opposed to class constructors), it's possible to\n    // alter the instance before calling the super constructor--so it's\n    // important to preserve that instance if at all possible.\n    if (!requiresNew && this instanceof newlessConstructor) {\n      // requiresNew = 'false' indicates we know the 'new' operator isn't\n      // necessary for this constructor, but 'null' indicates uncertainty,\n      // so the call needs to handle potential errors the first time in\n      // order to determine whether 'new' is definitely required.\n      if (requiresNew === false) {\n        var returnValue = constructor.apply(this, arguments);\n        return (typeof returnValue === 'object' && returnValue) || this;\n      }\n      try {\n        requiresNew = false;\n        var returnValue = constructor.apply(this, arguments);\n        return (typeof returnValue === 'object' && returnValue) || this;\n      }\n      catch (error) {\n        // Do our best to only capture errors triggred by class syntax.\n        // Unfortunately, there's no special error type for this and the\n        // message is non-standard, so this is the best check we can do.\n        if (error instanceof TypeError && (\n          /class constructor/i.test(error.message) ||\n          /use the 'new' operator/i.test(error.message) // Custom Elements in Chrome\n          // TODO: there might be other error messages we need to catch,\n          // depending on engine and use case. We need to test in all browsers\n        )) {\n            // mark this constructor as requiring 'new' for next time\n            requiresNew = true;\n        }\n        else {\n            if (\n                /Illegal constructor/i.test(error.message) &&\n                Object.create(constructor.prototype) instanceof Node\n            ) {\n                console.error(`\n                    The following error can happen if a Custom Element is called\n                    with 'new' before being defined. The constructor was ${constructor.name}:\n                `, constructor)\n            }\n\n            throw error;\n        }\n      }\n    }\n    // make a reasonably good replacement for 'new.target' which is a\n    // syntax error in older engines\n    var newTarget;\n    var hasNewTarget = false;\n    if (supportsNewTarget) {\n      eval('newTarget = new.target');\n      if (newTarget) hasNewTarget = true;\n    }\n    if ( !supportsNewTarget || !hasNewTarget ) {\n      newTarget = (this instanceof newlessConstructor) ?\n         this.constructor : constructor;\n    }\n    var returnValue = construct(constructor, arguments, newTarget);\n    // best effort to make things easy for functions inheriting from classes\n    if (this instanceof newlessConstructor) {\n      setPrototype(this, returnValue);\n    }\n    return returnValue;\n\n  } )();\n\n  if ( name ) {\n    const code = getFunctionBody( newlessConstructor )\n\n    newlessConstructor = Function(\"constructor, construct, setPrototype, requiresNew, supportsNewTarget\", `\n      var newlessConstructor = function ${name}() { ${code} };\n      return newlessConstructor\n    `)(constructor, construct, setPrototype, requiresNew, supportsNewTarget);\n  }\n\n  // copy the `.length` value to the newless constructor\n  if ( constructor.length ) {\n      // length is not writable, only configurable, therefore the value\n      // has to be set with a descriptor update\n      setDescriptor( newlessConstructor, 'length', {\n          value: constructor.length\n      })\n  }\n\n  newlessConstructor.prototype = Object.create( constructor.prototype );\n  newlessConstructor.prototype.constructor = newlessConstructor;\n\n  // NOTE: *usually* the below will already be true, but we ensure it here.\n  // Safari 9 requires this for the 'super' keyword to work. Newer versions\n  // of WebKit and other engines do not. Instead, they use the constructor's\n  // prototype chain (which is correct by ES2015 spec) (see below).\n  constructor.prototype.constructor = constructor;\n\n  // for ES2015 classes, we need to make sure the constructor's prototype\n  // is the super class's constructor. Further, optimize performance by\n  // pointing at the actual constructor implementation instead of the\n  // newless wrapper (in the case that it is wrapped by newless).\n  newlessConstructor[TRUE_CONSTRUCTOR] = constructor;\n\n  copyProperties(constructor, newlessConstructor);\n  setPrototype(newlessConstructor, constructor);\n\n  return newlessConstructor;\n};\n\n// Test whether a given syntax is supported\nfunction isSyntaxSupported(example, useStrict = true) {\n  try { return !!Function(\"\", (useStrict ? \"'use strict';\" : \"\") + example); }\n  catch (error) { return false; }\n}\n","// TODO\n//  [x] remove the now-unnecessary modes (leave just what was 'es5' mode)\n//  [x] link helpers to each other, making it possible to destructure the arguments to definer functions\n//  [x] let access helper prototype objects extend from Object, otherwise common tools are not available.\n//  [x] accept a function as return value of function definer, to be treated as a class to derive the definition from, so that it can have access to Protected and Private helpers\n//  [x] let the returned class define protected and private getters which return the protected and private definitions.\n//  [x] migrate to builder-js-package so tests can run in the browser, and we can test custom elements\n//  [ ] protected and private static members\n//  [ ] other TODOs in the code\n\nimport {\n    getFunctionBody,\n    setDescriptor,\n    setDescriptors,\n    propertyIsAccessor,\n    getInheritedDescriptor,\n    getInheritedPropertyNames,\n    WeakTwoWayMap,\n} from './utils'\n\nconst staticBlacklist = [ 'subclass', 'extends',\n    ...Object.getOwnPropertyNames( new Function() )\n]\n\nconst publicProtoToProtectedProto = new WeakMap\nconst publicProtoToPrivateProto = new WeakMap\n\n// A two-way map to associate public instances with protected instances.\n// There is one protected instance per public instance\nconst publicToProtected = new WeakTwoWayMap\n\n// so we can get the class scope associated with a private instance\nconst privateInstanceToClassScope = new WeakMap\n\nconst brandToPublicPrototypes = new WeakMap\nconst brandToProtectedPrototypes = new WeakMap\nconst brandToPrivatePrototypes = new WeakMap\nconst brandToPublicsPrivates = new WeakMap\n\nconst defaultOptions = {\n\n    // es5 class inheritance is simple, nice, easy, and robust\n    // There was another mode, but it has been removed\n    mode: 'es5',\n\n    // false is better for performance, but true will use Function (similar to\n    // eval) to name your class functions in the most accurate way.\n    nativeNaming: false,\n\n    // similar to ES6 classes:\n    prototypeWritable: false,\n    defaultClassDescriptor: {\n        writable: true,\n        enumerable: false,\n        configurable: true,\n    },\n    setClassDescriptors: true,\n\n}\n\nclass InvalidSuperAccessError extends Error {}\nclass InvalidAccessError extends Error {}\n\nconst Class = createClassHelper()\n\nfunction createClassHelper( options ) {\n    options = options ? { ...defaultOptions, ...options } : defaultOptions\n\n    options.defaultClassDescriptor = {\n        ...defaultOptions.defaultClassDescriptor,\n        ...options.defaultClassDescriptor\n    }\n\n    const {\n        mode, prototypeWritable, setClassDescriptors, nativeNaming\n    } = options\n\n    /*\n     * this is just the public interface adapter for createClass(). Depending\n     * on how you call this interface, you can do various things like:\n     *\n     * - anonymous empty class\n     *\n     *    Class()\n     *\n     * - named empty class\n     *\n     *    Class('Foo')\n     *\n     * - base class named Foo\n     *\n     *    Class('Foo', (Public, Protected, Private) => {\n     *      someMethod() { ... },\n     *    })\n     *\n     * - anonymous base class\n     *\n     *    Class((Public, Protected, Private) => {\n     *      someMethod() { ... },\n     *    })\n     *\n     *    Class('Foo').extends(OtherClass, (Public, Protected, Private) => ({\n     *      someMethod() { ... },\n     *    }))\n     *\n     *    OtherClass.subclass = Class\n     *    const Bar = OtherClass.subclass((Public, Protected, Private) => {\n     *      ...\n     *    })\n     *\n     * - any class made with lowclass has a static subclass if you prefer using\n     *   that:\n     *\n     *    Bar.subclass('Baz', (Public, Protected, Private) => {...})\n     *\n     * - but you could as well do\n     *\n     *    Class('Baz').extends(Bar, (Public, Protected, Private) => {...})\n     */\n    return function Class( ...args ) {\n\n        let usingStaticSubclassMethod = false\n\n        // if called as SomeConstructor.subclass, or bound to SomeConstructor\n        if ( typeof this === 'function' ) usingStaticSubclassMethod = true\n\n        // f.e. `Class()`, `Class('Foo')`, `Class('Foo', {...})` , `Class('Foo',\n        // {...}, Brand)`, similar to `class {}`, `class Foo {}`, class Foo\n        // {...}, and class Foo {...} with branding (see comments on classBrand\n        // below regarding positional privacy)\n        if ( args.length <= 3 ) {\n\n            let name = ''\n            let definer = null\n            let classBrand = null\n\n            // f.e. `Class('Foo')`\n            if ( typeof args[0] === 'string' ) name = args[0]\n\n            // f.e. `Class((pub, prot, priv) => ({ ... }))`\n            else if (\n                typeof args[0] === 'function' || typeof args[0] === 'object'\n            ) {\n                definer = args[0]\n                classBrand = args[1]\n            }\n\n            // f.e. `Class('Foo', (pub, prot, priv) => ({ ... }))`\n            if ( typeof args[1] === 'function' || typeof args[1] === 'object' ) {\n                definer = args[1]\n                classBrand = args[2]\n            }\n\n            // Make a class in case we wanted to do just `Class()` or\n            // `Class('Foo')`...\n            const Ctor = usingStaticSubclassMethod ?\n                createClass.call( this, name, definer, classBrand ) :\n                createClass( name, definer, classBrand )\n\n            // ...but add the extends helper in case we wanted to do like:\n            // Class().extends(OtherClass, (Public, Protected, Private) => ({\n            //   ...\n            // }))\n            Ctor.extends = function( ParentClass, def, brand ) {\n                def = def || definer\n                brand = brand || classBrand\n                return createClass.call( ParentClass, name, def, brand )\n            }\n\n            return Ctor\n        }\n\n        throw new TypeError( 'invalid args' )\n    }\n\n    /**\n     * @param {string} className The name that the class being defined should\n     * have.\n     * @param {Function} definer A function or object for defining the class.\n     * If definer a function, it is passed the Public, Protected, Private, and\n     * Super helpers. Methods and properties can be defined on the helpers\n     * directly.  An object containing methods and properties can also be\n     * returned from the function. If definer is an object, the object should\n     * be in the same format as the one returned if definer were a function.\n     */\n    function createClass( className, definer, classBrand ) {\n        \"use strict\"\n\n        // f.e. ParentClass.subclass((Public, Protected, Private) => {...})\n        let ParentClass = this\n\n        if ( typeof className !== 'string' ) {\n            throw new TypeError(`\n                You must specify a string for the 'className' argument.\n            `)\n        }\n\n        let definition = null\n\n        // f.e. Class('Foo', { ... })\n        if ( definer && typeof definer === 'object' ) {\n            definition = definer\n        }\n\n        // Return early if there's no definition or parent class, just a simple\n        // extension of Object. f.e. when doing just `Class()` or\n        // `Class('Foo')`\n        else if (\n            !ParentClass && (\n                !definer || (\n                    typeof definer !== 'function' &&\n                    typeof definer !== 'object'\n                )\n            )\n        ) {\n            let Ctor\n\n            if ( nativeNaming && className )\n                Ctor = new Function( `return function ${ className }() {}` )()\n            else {\n                // force anonymous even in ES6+\n                Ctor = ( () => function() {} )()\n\n                if ( className )\n                    setDescriptor( Ctor, 'name', { value: className } )\n            }\n\n            Ctor.prototype = { __proto__: Object.prototype, constructor: Ctor }\n\n            // no static inheritance here, just like with `class Foo {}`\n\n            setDescriptor(Ctor, 'subclass', {\n                value: Class,\n                writable: true, // TODO maybe let's make this non writable\n                enumerable: false,\n                configurable: false,\n            })\n\n            return Ctor\n        }\n\n        // A two-way map to associate public instances with private instances.\n        // Unlike publicToProtected, this is inside here because there is one\n        // private instance per class scope per instance (or to say it another\n        // way, each instance has as many private instances as the number of\n        // classes that the given instance has in its inheritance chain, one\n        // private instance per class)\n        const scopedPublicsToPrivates = classBrand ? void undefined : new WeakTwoWayMap\n\n        if (classBrand) {\n            if (!brandToPublicsPrivates.get(classBrand))\n                brandToPublicsPrivates.set(classBrand, new WeakTwoWayMap)\n        }\n\n        // if no brand provided, then we use the most fine-grained lexical\n        // privacy. Lexical privacy is described at\n        // https://github.com/tc39/proposal-class-fields/issues/60\n        //\n        // TODO make prototypes non-configurable so that the clasds-brand system\n        // can't be tricked. For now, it's good enough, most people aren't going\n        // to go out of their way to mangle with the prototypes in order to\n        // force invalid private access.\n        classBrand = classBrand || { brand: 'lexical' }\n\n        // the class \"scope\" that we will bind to the helper functions\n        const scope = {\n            className, // convenient for debugging\n\n            get publicToPrivate() {\n                return scopedPublicsToPrivates\n                    ? scopedPublicsToPrivates\n                    : brandToPublicsPrivates.get(classBrand)\n            },\n\n            classBrand,\n\n            // we use these to memoize the Public/Protected/Private access\n            // helper results, to make subsequent accessses faster.\n            cachedPublicAccesses: new WeakMap,\n            cachedProtectedAccesses: new WeakMap,\n            cachedPrivateAccesses: new WeakMap,\n        }\n\n        // create the super helper for this class scope\n        const supers = new WeakMap\n        const Super = superHelper.bind( null, supers, scope )\n\n        // bind this class' scope to the helper functions\n        const Public = getPublicMembers.bind( null, scope )\n        const Protected = getProtectedMembers.bind( null, scope )\n        const Private = getPrivateMembers.bind( null, scope )\n\n        Public.prototype = {}\n        Protected.prototype = {}\n        Private.prototype = {}\n\n        // alows the user to destructure arguments to definer functions\n        Public.Public = Public\n        Public.Protected = Protected\n        Public.Private = Private\n        Public.Super = Super\n        Protected.Public = Public\n        Protected.Protected = Protected\n        Protected.Private = Private\n        Protected.Super = Super\n        // Private and Super are never passed as first argument\n\n        // pass the helper functions to the user's class definition function\n        definition = definition || definer && definer(\n            Public, Protected, Private, Super\n        )\n\n        // the user has the option of returning an object that defines which\n        // properties are public/protected/private.\n        if ( definition && typeof definition !== 'object' && typeof definition !== 'function' ) {\n            throw new TypeError(`\n                The return value of a class definer function, if any, should be\n                an object, or a class constructor.\n            `)\n        }\n\n        // if a function was returned, we assume it is a class from which we\n        // get the public definition from.\n        let customClass = null\n        if ( typeof definition === 'function' ) {\n            customClass = definition\n            definition = definition.prototype\n            ParentClass = customClass.prototype.__proto__.constructor\n        }\n\n        let staticMembers\n\n        // if functions were provided for the public/protected/private\n        // properties of the definition object, execute them with their\n        // respective access helpers, and use the objects returned from them.\n        if ( definition ) {\n\n            staticMembers = definition.static\n            delete definition.static\n\n            if ( typeof definition.public === 'function' ) {\n                definition.public = definition.public(\n                    Protected, Private\n                )\n            }\n\n            if ( typeof definition.protected === 'function' ) {\n                definition.protected = definition.protected(\n                    Public, Private\n                )\n            }\n\n            if ( typeof definition.private === 'function' ) {\n                definition.private = definition.private(\n                    Public, Protected\n                )\n            }\n\n        }\n\n        ParentClass = ParentClass || Object\n\n        // extend the parent class\n        const parentPublicPrototype = ParentClass.prototype\n        const publicPrototype = definition && definition.public ||\n            definition || Object.create( parentPublicPrototype )\n        if ( publicPrototype.__proto__ !== parentPublicPrototype )\n            publicPrototype.__proto__ = parentPublicPrototype\n\n        // extend the parent protected prototype\n        const parentProtectedPrototype = getParentProtectedPrototype( parentPublicPrototype )\n        const protectedPrototype = definition && definition.protected\n            || Object.create( parentProtectedPrototype )\n        if ( protectedPrototype.__proto__ !== parentProtectedPrototype )\n            protectedPrototype.__proto__ = parentProtectedPrototype\n        publicProtoToProtectedProto.set( publicPrototype, protectedPrototype )\n\n        // private prototype inherits from parent, but each private instance is\n        // private only for the class of this scope\n        const parentPrivatePrototype = getParentPrivatePrototype( parentPublicPrototype )\n        const privatePrototype = definition && definition.private\n            || Object.create( parentPrivatePrototype )\n        if ( privatePrototype.__proto__ !== parentPrivatePrototype )\n            privatePrototype.__proto__ = parentPrivatePrototype\n        publicProtoToPrivateProto.set( publicPrototype, privatePrototype )\n\n        if (!brandToPublicPrototypes.get(classBrand)) brandToPublicPrototypes.set(classBrand, new Set)\n        if (!brandToProtectedPrototypes.get(classBrand)) brandToProtectedPrototypes.set(classBrand, new Set)\n        if (!brandToPrivatePrototypes.get(classBrand)) brandToPrivatePrototypes.set(classBrand, new Set)\n\n        brandToPublicPrototypes.get(classBrand).add(publicPrototype)\n        brandToProtectedPrototypes.get(classBrand).add(protectedPrototype)\n        brandToPrivatePrototypes.get(classBrand).add(privatePrototype)\n\n        scope.publicPrototype = publicPrototype\n        scope.privatePrototype = privatePrototype\n        scope.protectedPrototype = protectedPrototype\n        scope.parentPublicPrototype = parentPublicPrototype\n        scope.parentProtectedPrototype = parentProtectedPrototype\n        scope.parentPrivatePrototype = parentPrivatePrototype\n\n        // the user has the option of assigning methods and properties to the\n        // helpers that we passed in, to let us know which methods and\n        // properties are public/protected/private so we can assign them onto\n        // the respective prototypes.\n        copyDescriptors(Public.prototype, publicPrototype)\n        copyDescriptors(Protected.prototype, protectedPrototype)\n        copyDescriptors(Private.prototype, privatePrototype)\n\n        if ( definition ) {\n            // delete these so we don't expose them on the class' public\n            // prototype\n            delete definition.public\n            delete definition.protected\n            delete definition.private\n\n            // if a `public` object was also supplied, we treat that as the public\n            // prototype instead of the base definition object, so we copy the\n            // definition's props to the `public` object\n            //\n            // TODO For now we copy from the definition object to the 'public'\n            // object (publicPrototype), but this won't work with native `super`.\n            // Maybe later, we can use a Proxy to read props from both the root\n            // object and the public object, so that `super` works from both.\n            // Another option is to not allow a `public` object, only protected\n            // and private\n            if (definition !== publicPrototype) {\n\n                // copy whatever remains\n                copyDescriptors(definition, publicPrototype)\n            }\n        }\n\n        if ( customClass ) {\n            if ( staticMembers ) copyDescriptors( staticMembers, customClass )\n            return customClass\n        }\n\n        const userConstructor =\n            publicPrototype.hasOwnProperty('constructor') ?\n            publicPrototype.constructor :\n            null\n\n        let NewClass = null\n        let newPrototype = null\n\n        // ES5 version (which seems to be so much better)\n        if ( mode === 'es5' ) {\n\n            NewClass = ( () => function() {\n\n                let ret = null\n\n                let constructor = null\n\n                if ( userConstructor ) constructor = userConstructor\n                else constructor = ParentClass\n\n                // Object is a special case because otherwise\n                // `Object.apply(this)` returns a different object and we don't\n                // want to deal with return value in that case\n                if ( constructor !== Object )\n                    ret = constructor.apply( this, arguments )\n\n                if ( ret && (typeof ret === 'object' || typeof ret === 'function') ) {\n                    // XXX should we set ret.__proto__ = constructor.prototype\n                    // here? Or let the user deal with that?\n                    return ret\n                }\n\n                return this\n\n            } )()\n\n            newPrototype = publicPrototype\n\n        }\n\n        else {\n            throw new TypeError(`\n                The lowclass \"mode\" option can only be 'es5' for now.\n            `)\n        }\n\n        if ( className ) {\n            if ( nativeNaming ) {\n\n                const code = getFunctionBody( NewClass )\n                const proto = NewClass.prototype\n\n                NewClass = new Function(` userConstructor, ParentClass `, `\n                    return function ${className}() { ${code} }\n                `)( userConstructor, ParentClass )\n\n                NewClass.prototype = proto\n            }\n            else {\n                setDescriptor( NewClass, 'name', { value: className } )\n            }\n        }\n\n        if ( userConstructor && userConstructor.length ) {\n            // length is not writable, only configurable, therefore the value\n            // has to be set with a descriptor update\n            setDescriptor( NewClass, 'length', {\n                value: userConstructor.length\n            })\n        }\n\n        // static stuff {\n\n        // static inheritance\n        NewClass.__proto__ = ParentClass\n\n        if ( staticMembers ) copyDescriptors( staticMembers, NewClass )\n\n        // allow users to make subclasses. When subclass is called on a\n        // constructor, it defines `this` which is assigned to ParentClass\n        // above.\n        setDescriptor(NewClass, 'subclass', {\n            value: Class,\n            writable: true,\n            enumerable: false,\n            configurable: false,\n        })\n\n        // }\n\n        // prototype stuff {\n\n        NewClass.prototype = newPrototype\n\n        NewClass.prototype.constructor = NewClass\n\n        // }\n\n        if ( setClassDescriptors ) {\n            setDefaultStaticDescriptors( NewClass, options )\n            setDescriptor(NewClass, 'prototype', {writable: prototypeWritable})\n            setDefaultPrototypeDescriptors( NewClass.prototype, options )\n            setDefaultPrototypeDescriptors( protectedPrototype, options )\n            setDefaultPrototypeDescriptors( privatePrototype, options )\n        }\n\n        scope.constructor = NewClass // convenient for debugging\n\n        return NewClass\n    }\n}\n\n// XXX PERFORMANCE: instead of doing multiple prototype traversals with\n// hasPrototype in the following access helpers, maybe we can do a single\n// traversal and check along the way?\n//\n// Worst case examples:\n//\n//   currently:\n//     If class hierarchy has 20 classes\n//     If we detect which instance we have in order of public, protected, private\n//     If the instance we're checking is the private instance of the middle class (f.e. class 10)\n//     We'll traverse 20 public prototypes with 20 conditional checks\n//     We'll traverse 20 protected prototypes with 20 conditional checks\n//     And finally we'll traverse 10 private prototypes with 10 conditional checks\n//     TOTAL: We traverse over 50 prototypes with 50 conditional checks\n//\n//   proposed:\n//     If class hierarchy has 20 classes\n//     If we detect which instance we have in order of public, protected, private\n//     If the instance we're checking is the private instance of the middle class (f.e. class 10)\n//     We'll traverse 10 public prototypes with 3 conditional checks at each prototype\n//     TOTAL: We traverse over 10 prototypes with 30 conditional checks\n//     BUT: The conditional checking will involve reading WeakMaps instead of\n//     checking just reference equality. If we can optimize how this part\n//     works, it might be worth it.\n//\n// Can the tradeoff (less traversal and conditional checks) outweigh the\n// heavier conditional checks?\n//\n// XXX PERFORMANCE: We can also cache the access-helper results, which requires more memory,\n// but will make use of access helpers much faster, especially important for\n// animations.\n\nfunction getParentProtectedPrototype(parentPublicPrototype) {\n    // look up the prototype chain until we find a parent protected prototype, if any.\n\n    let parentProtectedProto\n    let currentPublicProto = parentPublicPrototype\n\n    while (currentPublicProto && !parentProtectedProto) {\n        parentProtectedProto = publicProtoToProtectedProto.get( currentPublicProto )\n        currentPublicProto = currentPublicProto.__proto__\n    }\n\n    // TODO, now that we're finding the nearest parent protected proto,\n    // we might not need to create an empty object for each class if we\n    // don't find one, to avoid prototype lookup depth, as we'll connect\n    // to the nearest one we find, if any.\n    return parentProtectedProto || {}\n}\n\nfunction getParentPrivatePrototype(parentPublicPrototype) {\n    // look up the prototype chain until we find a parent protected prototype, if any.\n\n    let parentPrivateProto\n    let currentPublicProto = parentPublicPrototype\n\n    while (currentPublicProto && !parentPrivateProto) {\n        parentPrivateProto = publicProtoToPrivateProto.get( currentPublicProto )\n        currentPublicProto = currentPublicProto.__proto__\n    }\n\n    // TODO, now that we're finding the nearest parent protected proto,\n    // we might not need to create an empty object for each class if we\n    // don't find one, to avoid prototype lookup depth, as we'll connect\n    // to the nearest one we find, if any.\n    return parentPrivateProto || {}\n}\n\nfunction getPublicMembers( scope, instance ) {\n    let result = scope.cachedPublicAccesses.get(instance)\n\n    if (result) return result\n\n    // check only for the private instance of this class scope\n    if ( isPrivateInstance( scope, instance ) )\n        scope.cachedPublicAccesses.set(instance, result = getSubclassScope( instance ).publicToPrivate.get( instance ))\n\n    // check for an instance of the class (or its subclasses) of this scope\n    else if ( isProtectedInstance( scope, instance ) )\n        scope.cachedPublicAccesses.set(instance, result = publicToProtected.get( instance ))\n\n    // otherwise just return whatever was passed in, it's public already!\n    else scope.cachedPublicAccesses.set(instance, result = instance)\n\n    return result\n}\n\nfunction getProtectedMembers( scope, instance ) {\n    let result = scope.cachedProtectedAccesses.get(instance)\n\n    if (result) return result\n\n    // check for an instance of the class (or its subclasses) of this scope\n    // This allows for example an instance of an Animal base class to access\n    // protected members of an instance of a Dog child class.\n    if ( isPublicInstance( scope, instance ) )\n        scope.cachedProtectedAccesses.set(instance, result = publicToProtected.get( instance ) || createProtectedInstance( instance ))\n\n    // check for a private instance inheriting from this class scope\n    else if ( isPrivateInstance( scope, instance ) ) {\n        const publicInstance = getSubclassScope( instance ).publicToPrivate.get( instance )\n        scope.cachedProtectedAccesses.set(instance, result = publicToProtected.get( publicInstance ) || createProtectedInstance( publicInstance ))\n    }\n\n    // return the protected instance if it was passed in\n    else if ( isProtectedInstance( scope, instance ) )\n        scope.cachedProtectedAccesses.set(instance, result = instance)\n\n    if (!result) throw new InvalidAccessError('invalid access of protected member')\n\n    return result\n}\n\nfunction getSubclassScope( privateInstance ) {\n    return privateInstanceToClassScope.get( privateInstance )\n}\n\nfunction createProtectedInstance( publicInstance ) {\n\n    // traverse instance proto chain, find first protected prototype\n    const protectedPrototype = findLeafmostProtectedPrototype( publicInstance )\n\n    // make the protected instance from the found protected prototype\n    const protectedInstance = Object.create( protectedPrototype )\n    publicToProtected.set( publicInstance, protectedInstance )\n    return protectedInstance\n}\n\nfunction findLeafmostProtectedPrototype( publicInstance ) {\n    let result = null\n    let currentProto = publicInstance.__proto__\n\n    while ( currentProto ) {\n        result = publicProtoToProtectedProto.get( currentProto )\n        if ( result ) return result\n        currentProto = currentProto.__proto__\n    }\n\n    return result\n}\n\nfunction getPrivateMembers( scope, instance ) {\n    let result = scope.cachedPrivateAccesses.get(instance)\n\n    if (result) return result\n\n    // check for a public instance that is or inherits from this class\n    if ( isPublicInstance( scope, instance ) )\n        scope.cachedPrivateAccesses.set(instance, result = scope.publicToPrivate.get( instance ) || createPrivateInstance( scope, instance ))\n\n    // check for a protected instance that is or inherits from this class'\n    // protectedPrototype\n    else if ( isProtectedInstance( scope, instance ) ) {\n        const publicInstance = publicToProtected.get( instance )\n        scope.cachedPrivateAccesses.set(instance, result = scope.publicToPrivate.get( publicInstance ) || createPrivateInstance( scope, publicInstance ))\n    }\n\n    // return the private instance if it was passed in\n    else if ( isPrivateInstance( scope, instance ) )\n        scope.cachedPrivateAccesses.set(instance, result = instance)\n\n    if (!result) throw new InvalidAccessError('invalid access of private member')\n\n    return result\n}\n\nfunction createPrivateInstance( scope, publicInstance ) {\n    const privateInstance = Object.create( scope.privatePrototype )\n    scope.publicToPrivate.set( publicInstance, privateInstance )\n    privateInstanceToClassScope.set( privateInstance, scope ) // TODO use WeakTwoWayMap\n    return privateInstance\n}\n\nfunction isPublicInstance( scope, instance, brandedCheck = true ) {\n    if (!brandedCheck)\n        return hasPrototype(instance, scope.publicPrototype)\n\n    for (const proto of Array.from(brandToPublicPrototypes.get(scope.classBrand))) {\n        if (hasPrototype(instance, proto)) return true\n    }\n\n    return false\n}\n\nfunction isProtectedInstance( scope, instance, brandedCheck = true ) {\n    if (!brandedCheck)\n        return hasPrototype(instance, scope.protectedPrototype)\n\n    for (const proto of Array.from(brandToProtectedPrototypes.get(scope.classBrand))) {\n        if (hasPrototype(instance, proto)) return true\n    }\n\n    return false\n}\n\nfunction isPrivateInstance( scope, instance, brandedCheck = true ) {\n    if (!brandedCheck)\n        return hasPrototype(instance, scope.privatePrototype)\n\n    for (const proto of Array.from(brandToPrivatePrototypes.get(scope.classBrand))) {\n        if (hasPrototype(instance, proto)) return true\n    }\n\n    return false\n}\n\n// check if an object has the given prototype in its chain\nfunction hasPrototype( obj, proto ) {\n    let currentProto = obj.__proto__\n\n    do {\n        if ( proto === currentProto ) return true\n        currentProto = currentProto.__proto__\n    } while ( currentProto )\n\n    return false\n}\n\n// copy all properties (as descriptors) from source to destination\nfunction copyDescriptors(source, destination, mod) {\n    const props = Object.getOwnPropertyNames(source)\n    let i = props.length\n    while (i--) {\n        const prop = props[i]\n        const descriptor = Object.getOwnPropertyDescriptor(source, prop)\n        if (mod) mod(descriptor)\n        Object.defineProperty(destination, prop, descriptor)\n    }\n}\n\nfunction superHelper( supers, scope, instance ) {\n    const {\n        parentPublicPrototype,\n        parentProtectedPrototype,\n        parentPrivatePrototype\n    } = scope\n\n    if ( isPublicInstance( scope, instance, false ) )\n        return getSuperHelperObject( instance, parentPublicPrototype, supers )\n\n    if ( isProtectedInstance( scope, instance, false ) )\n        return getSuperHelperObject(instance, parentProtectedPrototype, supers)\n\n    if ( isPrivateInstance( scope, instance, false ) )\n        return getSuperHelperObject( instance, parentPrivatePrototype, supers )\n\n    throw new InvalidSuperAccessError('invalid super access')\n}\n\nfunction getSuperHelperObject( instance, parentPrototype, supers ) {\n    let _super = supers.get( instance )\n\n    // XXX PERFORMANCE: there's probably some ways to improve speed here using caching\n    if ( !_super ) {\n        supers.set( instance, _super = Object.create( parentPrototype ) )\n\n        const keys = getInheritedPropertyNames( parentPrototype )\n        let i = keys.length\n\n        while (i--) {\n            const key = keys[i]\n\n            setDescriptor( _super, key, {\n\n                get: function() {\n                    let value = void undefined\n\n                    const descriptor = getInheritedDescriptor( parentPrototype, key )\n\n                    if ( descriptor && propertyIsAccessor( descriptor ) ) {\n                        const getter = descriptor.get\n                        if ( getter ) value = getter.call( instance )\n                    }\n                    else {\n                        value = parentPrototype[ key ]\n                    }\n\n                    if ( value && value.call && typeof value === 'function' ) {\n                        value = value.bind( instance )\n                    }\n\n                    return value\n                },\n\n                // like native `super`, setting a super property does nothing.\n                set: function( value ) {\n                    const descriptor = getInheritedDescriptor( parentPrototype, key )\n\n                    if ( descriptor && propertyIsAccessor( descriptor ) ) {\n                        const setter = descriptor.set\n                        if ( setter ) value = setter.call( instance, value )\n                    }\n                    else {\n                        // just like native `super`\n                        instance[ key ] = value\n                    }\n                },\n\n            }, true)\n        }\n    }\n\n    return _super\n}\n\nfunction setDefaultPrototypeDescriptors( prototype,\n    { defaultClassDescriptor: { writable, enumerable, configurable } }\n) {\n    const descriptors = Object.getOwnPropertyDescriptors( prototype )\n    let descriptor\n\n    for ( const key in descriptors ) {\n        descriptor = descriptors[ key ]\n\n        // regular value\n        if ( 'value' in descriptor || 'writable' in descriptor ) {\n            descriptor.writable = writable\n        }\n\n        // accessor or regular value\n        descriptor.enumerable = enumerable\n        descriptor.configurable = configurable\n    }\n\n    setDescriptors( prototype, descriptors )\n}\n\nfunction setDefaultStaticDescriptors( Ctor,\n    { defaultClassDescriptor: { writable, enumerable, configurable } }\n) {\n    const descriptors = Object.getOwnPropertyDescriptors( Ctor )\n    let descriptor\n\n    for ( const key in descriptors ) {\n        if ( staticBlacklist.includes( key ) ) {\n            delete descriptors[ key ]\n            continue\n        }\n\n        descriptor = descriptors[ key ]\n\n        // regular value\n        if ( 'value' in descriptor || 'writable' in descriptor ) {\n            descriptor.writable = writable\n        }\n\n        // accessor or regular value\n        descriptor.enumerable = enumerable\n        descriptor.configurable = configurable\n    }\n\n    setDescriptors( Ctor, descriptors )\n}\n\nexport default Class\n\nexport {\n    Class,\n    createClassHelper,\n    InvalidSuperAccessError,\n    InvalidAccessError,\n    staticBlacklist,\n}\n","import Class from './'\n\nexport default\nfunction Mixin( factory, Default ) {\n\n    // XXX Maybe Cached should go last.\n    factory = Cached( factory )\n    factory = HasInstance( factory )\n    factory = Dedupe( factory )\n    factory = WithDefault( factory, Default || Class() )\n    factory = ApplyDefault( factory )\n\n    return factory()\n}\n\nexport {\n    Mixin,\n    WithDefault,\n    Cached,\n    HasInstance,\n    ApplyDefault,\n    Dedupe,\n}\n\nfunction WithDefault( classFactory, Default ) {\n    return named(classFactory.name, Base => {\n        Base = Base || Default\n        return classFactory( Base )\n    })\n}\n\nfunction Cached( classFactory ) {\n    const classCache = new WeakMap\n\n    return named(classFactory.name, Base => {\n        let Class = classCache.get( Base )\n\n        if ( !Class ) {\n            classCache.set( Base, Class = classFactory( Base ) )\n        }\n\n        return Class\n    })\n}\n\nfunction HasInstance( classFactory ) {\n    let instanceofSymbol\n\n    return named(classFactory.name, Base => {\n        const Class = classFactory( Base )\n\n        if ( typeof Symbol === 'undefined' || !Symbol.hasInstance )\n            return Class\n\n        if ( Object.getOwnPropertySymbols( Class ).includes( Symbol.hasInstance ) )\n            return Class\n\n        if ( !instanceofSymbol )\n            instanceofSymbol = Symbol('instanceofSymbol')\n\n        // NOTE we could also use a WeakMap instead of placing a flag on the\n        // Class directly.\n        Class[instanceofSymbol] = true\n\n        Object.defineProperty(Class, Symbol.hasInstance, {\n\n            value: function hasInstance(obj) {\n\n                // we do this check because a subclass of `Class` may not have\n                // it's own `[Symbol.hasInstance]()` method, therefore `this`\n                // will be the subclass, not this `Class`, when the prototype\n                // lookup on the subclass finds the `[Symbol.hasInstance]()`\n                // method of this `Class`. In this case, we don't want to run\n                // our logic here, so we delegate to the super class of this\n                // `Class` to take over with the instanceof check. In many\n                // cases, the super class `[Symbol.hasInstance]()` method will\n                // be `Function.prototype[Symbol.hasInstance]` which will\n                // perform the standard check.\n                if (this !== Class)\n                    // This is effectively a `super` call.\n                    return Class.__proto__[Symbol.hasInstance].call(this, obj)\n\n                let currentProto = obj\n\n                while(currentProto) {\n                    const descriptor = Object.getOwnPropertyDescriptor(currentProto, \"constructor\")\n\n                    if (\n                        descriptor &&\n                        descriptor.value &&\n                        descriptor.value.hasOwnProperty(instanceofSymbol)\n                    ) return true\n\n                    currentProto = currentProto.__proto__\n                }\n\n                return false\n\n            }\n\n        })\n\n        return Class\n    })\n}\n\n// requires WithDefault or a classFactory that can accept no args\nfunction ApplyDefault( classFactory ) {\n    const DefaultClass = classFactory()\n    DefaultClass.mixin = classFactory\n    return classFactory\n}\n\n// requires Cached\nfunction Dedupe( classFactory ) {\n    const map = new WeakMap\n\n    return named(classFactory.name, Base => {\n\n        if ( hasMixin( Base, classFactory, map ) )\n            return Base\n\n        const Class = classFactory( Base )\n        map.set( Class, classFactory )\n        return Class\n    })\n}\n\nfunction hasMixin( Class, mixin, map ) {\n    while (Class) {\n        if ( map.get(Class) === mixin ) return true\n        Class = Class.__proto__\n    }\n\n    return false\n}\n\nfunction named(name, func) {\n    try {\n        Object.defineProperty(func, 'name', {\n            ...Object.getOwnPropertyDescriptor(func, 'name'),\n            value: name\n        })\n    } catch(e) {\n        // do nohing in case the property is non-configurable.\n    }\n    \n    return func\n}\n","// helper function to use instead of instanceof for classes that implement the\n// static Symbol.hasInstance method, because the behavior of instanceof isn't\n// polyfillable.\nexport default function instanceOf(instance, Constructor) {\n    if (typeof Constructor == 'function' && Constructor[Symbol.hasInstance])\n        return Constructor[Symbol.hasInstance](instance)\n    else return instance instanceof Constructor\n}\n","// the bread and butter\nexport * from './Class'\nimport Class from './Class'\nexport default Class\n\n// mix and match your classes!\nexport * from './Mixin'\n\n// extras\nexport { default as instanceOf } from './instanceOf'\nexport * from './native'\nexport * from './utils'\n\nexport const version = '4.6.2'\n"],"sourceRoot":""}